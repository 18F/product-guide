{"version":3,"file":"uploadcare.tab-effects.js","sources":["../src/locale/be.js","../src/locale/en.js","../src/locale/fr.js","../src/locale/it.js","../src/locale/ja.js","../src/locale/nl.js","../src/locale/ru.js","../src/locale/vi.js","../src/initial-settings.js","../src/tools/configure-translations.js","../src/tools/create-node.js","../src/tools/custom-extends.js","../src/tools/effects-from-modifiers.js","../src/initial-state.js","../src/tools/get-applied-effects.js","../src/tools/get-modifiers-by-crop.js","../src/tools/get-modifiers-by-effects.js","../src/tools/get-next-rotate-value.js","../src/tools/get-settings-crop.js","../src/all-effects.js","../src/tools/get-settings-effects.js","../src/tools/get-global-settings-by-key.js","../src/tools/get-crop-resize.js","../src/tools/auto-crop.js","../src/tools/build-file-info-crop.js","../src/configure-settings.js","../src/create-store.js","../src/configure-store.js","../src/components/Content/Content.js","../src/components/CropButton/CropButton.js","../src/components/Crops/Crops.js","../src/components/Icon/Icon.js","../src/components/EffectButton/EffectButton.js","../src/components/Effects/Effects.js","../src/components/Footer/Footer.js","../src/components/Header/Header.js","../src/components/Image/Image.js","../src/components/Range/Range.js","../src/components/Tab/Tab.js","../src/create-preview-tab-effects.js","../src/index.js"],"sourcesContent":["export default {\n  effects: {\n    captions: {\n      blur: 'Размыццё',\n      crop: 'Абрэзка',\n      enhance: 'Паляпшэнне',\n      flip: 'Адлюстраваць па вертыкалі',\n      grayscale: 'Адценні шэрага',\n      invert: 'Інвертаваць',\n      mirror: 'Адлюстраваць па гарызанталі',\n      rotate: 'Павярнуць',\n      sharp: 'Выразнасць',\n    },\n    apply: 'Ужыць',\n  },\n}\n","export default {\n  effects: {\n    captions: {\n      blur: 'Blur',\n      crop: 'Crop',\n      enhance: 'Enhance',\n      flip: 'Flip',\n      grayscale: 'Grayscale',\n      invert: 'Invert',\n      mirror: 'Mirror',\n      rotate: 'Rotate',\n      sharp: 'Sharpen',\n    },\n    apply: 'Apply',\n  },\n}\n","export default {\n  effects: {\n    captions: {\n      blur: 'Flouter',\n      crop: 'Recadrer',\n      enhance: 'Effets',\n      flip: 'Retourner',\n      grayscale: 'Noir et blanc',\n      invert: 'Inverser',\n      mirror: 'Mirroir',\n      rotate: 'Tourner',\n      sharp: 'Netteté',\n    },\n    apply: 'Appliquer',\n  },\n}\n","export default {\n  effects: {\n    captions: {\n      blur: 'Sfoca',\n      crop: 'Ritaglia',\n      enhance: 'Accentua',\n      flip: 'Capovolgi',\n      grayscale: 'Bianconero',\n      invert: 'Inverti',\n      mirror: 'Specchia',\n      rotate: 'Ruota',\n      sharp: 'Nitidezza',\n    },\n    apply: 'Applica',\n  },\n}\n","export default {\n  effects: {\n    captions: {\n      blur: 'ぼかし',\n      crop: 'トリミング',\n      enhance: '補正',\n      flip: '反転',\n      grayscale: 'グレースケール',\n      invert: '階調反転',\n      mirror: 'ミラー',\n      rotate: '回転',\n      sharp: 'シャープ',\n    },\n    apply: '適用',\n  },\n}\n","export default {\n  effects: {\n    captions: {\n      blur: 'Vervagen',\n      crop: 'Bijknippen',\n      enhance: 'Verbeteren',\n      flip: 'Omkeren',\n      grayscale: 'Zwart-wit',\n      invert: 'Inverteren',\n      mirror: 'Spiegelen',\n      rotate: 'Roteren',\n      sharp: 'Verscherpen',\n    },\n    apply: 'Toepassen',\n  },\n}\n","export default {\n  effects: {\n    captions: {\n      blur: 'Размытие',\n      crop: 'Обрезка',\n      enhance: 'Улучшение',\n      flip: 'Отразить по вертикали',\n      grayscale: 'Оттенки серого',\n      invert: 'Инвертировать',\n      mirror: 'Отразить по горизонтали',\n      rotate: 'Повернуть',\n      sharp: 'Резкость',\n    },\n    apply: 'Применить',\n  },\n}\n","export default {\n  effects: {\n    captions: {\n      blur: 'Mờ',\n      crop: 'Cắt',\n      enhance: 'Tinh chỉnh',\n      flip: 'Lật',\n      grayscale: 'Xám',\n      invert: 'Âm bản',\n      mirror: 'Gương',\n      rotate: 'Xoay',\n      sharp: 'Làm nét',\n    },\n    apply: 'Áp dụng',\n  },\n}\n","export default {\n  effects: ['crop', 'rotate', 'enhance', 'sharp', 'grayscale'],\n  locale: 'en',\n}\n","import * as locales from 'locale'\nimport initialSettings from '../initial-settings'\n\n/**\n * Check if locale available in list of locales for Tab.\n * @param locale\n * @return {boolean}\n */\nconst isLocaleAvailable = locale => {\n  const availableLocales = Object.keys(locales)\n\n  return availableLocales.indexOf(locale) > -1\n}\n\n/**\n * Configure translations for Tab.\n * @param translations\n * @param currentLocale\n * @return {*}\n */\nconst configureTranslations = (translations, currentLocale) => {\n  const extendedTranslations = {...translations}\n  const isCurrentLocaleAvailable = isLocaleAvailable(currentLocale)\n  const defaultTranslations = locales[initialSettings.locale]\n  const isLocaleAvailableInTranslations = locale => extendedTranslations.hasOwnProperty(locale)\n\n  for (const locale in extendedTranslations) {\n    if (isLocaleAvailableInTranslations(locale)) {\n      if (!isLocaleAvailableInTranslations(currentLocale)) {\n        const currentLocaleTranslations = extendedTranslations[currentLocale]\n\n        extendedTranslations[currentLocale] = {\n          ...currentLocaleTranslations,\n          ...defaultTranslations,\n        }\n\n        /* eslint-disable no-continue */\n        continue\n      }\n\n      if (isCurrentLocaleAvailable || isLocaleAvailable(locale)) {\n        extendedTranslations[locale] = {\n          ...extendedTranslations[locale],\n          ...locales[locale],\n        }\n      }\n      else {\n        extendedTranslations[locale] = {\n          ...extendedTranslations[locale],\n          ...defaultTranslations,\n        }\n      }\n    }\n  }\n\n  return extendedTranslations\n}\n\nexport default configureTranslations\n","const createNode = (html) => new DOMParser().parseFromString(html, 'text/html').body.firstChild\n\nexport default createNode\n","function customExtends(child, parent) {\n  for (const key in parent) {\n    if (Object.prototype.hasOwnProperty.call(parent, key)) {\n      child[key] = parent[key]\n    }\n  }\n\n  function Ctor() {\n    this.constructor = child\n  }\n\n  Ctor.prototype = parent.prototype\n  child.prototype = new Ctor()\n  child.__super__ = parent.prototype\n\n  return child\n}\n\nexport default customExtends\n","const effectsDefaults = {\n  blur: ['number', 10],\n  enhance: ['number', 50],\n  flip: ['boolean'],\n  grayscale: ['boolean'],\n  invert: ['boolean'],\n  mirror: ['boolean'],\n  rotate: ['number'],\n  sharp: ['number', 5],\n}\n\nconst modifierRegExp = {\n  blur: /-\\/blur\\/(([0-9]+)\\/|)/i,\n  crop: /-\\/crop\\/([0-9]+)x([0-9]+)(\\/(center|([0-9]+),([0-9]+)))?\\/(-\\/resize\\/([0-9]+)x([0-9]+)\\/)?/i,\n  enhance: /-\\/enhance\\/(([0-9]+)\\/|)/i,\n  flip: /-\\/flip\\//i,\n  grayscale: /-\\/grayscale\\//i,\n  invert: /-\\/invert\\//i,\n  mirror: /-\\/mirror\\//i,\n  rotate: /-\\/rotate\\/(([0-9]+)\\/)/i,\n  sharp: /-\\/sharp\\/(([0-9]+)\\/|)/i,\n}\n\nfunction effectsFromModifiers(cdnUrlModifiers, settingsEffects, settingsCrop) {\n  if (!cdnUrlModifiers) {\n    return {\n      effects: {},\n      otherModifiers: '',\n    }\n  }\n\n  let effects = {}\n  let otherModifiers = cdnUrlModifiers.replace(/-\\/preview\\//g, '')\n\n  settingsEffects.forEach(settingsEffect => {\n    if (modifierRegExp[settingsEffect]) {\n      const foundModifier = cdnUrlModifiers.match(modifierRegExp[settingsEffect])\n\n      if (foundModifier) {\n        let effectValue\n\n        if (settingsEffect === 'crop') {\n          const resizeTo = foundModifier[7] && [foundModifier[8], foundModifier[9]]\n\n          const cropWidth = parseInt(foundModifier[1])\n          const cropHeight = parseInt(foundModifier[2])\n\n          const cropIndex = settingsCrop.findIndex((settings) => {\n            if (typeof settings.preferedSize === 'undefined') {\n              return true\n            }\n            const {preferedSize: [w, h]} = settings\n            const sameSize = cropWidth === w && cropHeight === h\n            const sameRatio = (w / h).toPrecision(2) === (cropWidth / cropHeight).toPrecision(2)\n\n            return sameSize || sameRatio\n          })\n\n          effectValue = {\n            resizeTo,\n            index: cropIndex >= 0 ? cropIndex : null,\n            coords: {\n              width: cropWidth,\n              height: cropHeight,\n              center: foundModifier[4] === 'center',\n              left: foundModifier[5] === undefined ? undefined : parseInt(foundModifier[5]),\n              top: foundModifier[6] === undefined ? undefined : parseInt(foundModifier[6]),\n            },\n          }\n        }\n        else {\n          if (effectsDefaults[settingsEffect][0] === 'boolean') {\n            effectValue = true\n          }\n          if (effectsDefaults[settingsEffect][0] === 'number') {\n            effectValue =\n              foundModifier[2] === undefined ? effectsDefaults[settingsEffect][1] : parseInt(foundModifier[2])\n          }\n        }\n\n        effects[settingsEffect] = effectValue\n        otherModifiers = otherModifiers.replace(foundModifier[0], '')\n      }\n    }\n  })\n\n  return {\n    effects,\n    otherModifiers,\n  }\n}\n\nexport default effectsFromModifiers\n","export default {\n  view: 'preview',\n  image: {},\n  appliedEffects: {\n    blur: 0,\n    crop: null,\n    enhance: 0,\n    flip: false,\n    grayscale: false,\n    invert: false,\n    mirror: false,\n    rotate: 0,\n    sharp: 0,\n  },\n  otherModifiers: '',\n}\n","import initialState from '../initial-state'\n\nconst getAppliedEffects = (settingsEffects) => {\n  const {appliedEffects: initialAppliedEffects} = initialState\n  let appliedEffects = {}\n\n  settingsEffects.forEach(settingsEffect => {\n    if (initialAppliedEffects[settingsEffect] !== undefined) {\n      appliedEffects[settingsEffect] = initialAppliedEffects[settingsEffect]\n    }\n  })\n\n  return appliedEffects\n}\n\nexport default getAppliedEffects\n","const getModifiersByCrop = crop => {\n  const size = crop.originalSize\n  const {width, height, center, left, top} = crop.coords\n\n  let modifiers = ''\n\n  if (size) {\n    const wholeImage = width === size[0] && height === size[1]\n\n    if (!wholeImage) {\n      modifiers += `-/crop/${width}x${height}/${left},${top}/`\n    }\n  }\n  else {\n    modifiers += `-/crop/${width}x${height}/`\n\n    if (center) {\n      modifiers += 'center/'\n    }\n    else if (left !== undefined && top !== undefined) {\n      modifiers += `${left},${top}/`\n    }\n  }\n\n  if (crop.resizeTo) {\n    modifiers += `-/resize/${crop.resizeTo.join('x')}/`\n  }\n  else {\n    modifiers += '-/preview/'\n  }\n\n  return modifiers\n}\n\nexport default getModifiersByCrop\n","import getModifiersByCrop from './get-modifiers-by-crop'\n\nconst getModifiersByEffects = (effects, withCrop = true, withRFM = true) => {\n  let cdnUrlModifiers = ''\n\n  for (const effect in effects) {\n    if (effects[effect]) {\n      switch (typeof effects[effect]) {\n        case 'boolean':\n          if (!withRFM && !!~['flip', 'mirror'].indexOf(effect)) {\n            break\n          }\n          cdnUrlModifiers += `-/${effect}/`\n          break\n        case 'number':\n          if (!withRFM && effect === 'rotate') {\n            break\n          }\n          cdnUrlModifiers += `-/${effect}/${effects[effect]}/`\n          break\n        case 'object':\n          if (effect === 'crop' && withCrop) {\n            cdnUrlModifiers += getModifiersByCrop(effects[effect])\n          }\n          break\n      }\n    }\n  }\n\n  if (cdnUrlModifiers) {\n    cdnUrlModifiers = effects['crop'] && withCrop ? cdnUrlModifiers : `-/preview/${cdnUrlModifiers}`\n  }\n  else {\n    cdnUrlModifiers = ''\n  }\n\n  return cdnUrlModifiers\n}\n\nexport default getModifiersByEffects\n","const rotateValues = [0, 270, 180, 90]\nconst getNextRotateValue = (currentValue) => {\n  const currentIndex = rotateValues.indexOf(currentValue)\n\n  if (!~currentIndex || (currentIndex === (rotateValues.length - 1))) {\n    return rotateValues[0]\n  }\n\n  return rotateValues[currentIndex + 1]\n}\n\nexport default getNextRotateValue\n","const getSettingsCrop = (crop, effects) => {\n  if (crop || !~effects.indexOf('crop')) {\n    return crop\n  }\n\n  return [{\n    downscale: false,\n    notLess: false,\n    preferedSize: undefined,\n    upscale: false,\n  }]\n}\n\nexport default getSettingsCrop\n","const ALL_EFFECTS = [\n  'crop',\n  'rotate',\n  'mirror',\n  'flip',\n  'blur',\n  'sharp',\n  'enhance',\n  'grayscale',\n  'invert',\n]\n\nexport default ALL_EFFECTS\n","import initialSettings from '../initial-settings'\nimport ALL_EFFECTS from '../all-effects'\n\nconst getSettingsEffects = (value) => {\n  let settingsEffects = []\n\n  if (typeof value === 'string' && value === 'all') {\n    return ALL_EFFECTS\n  }\n\n  if (typeof value === 'string') {\n    settingsEffects = value.replace(/\\s/g, '').split(',')\n  }\n  else if (Array.isArray(value)) {\n    settingsEffects = value\n  }\n  else {\n    settingsEffects = initialSettings.effects\n  }\n\n  const cropIndex = settingsEffects.indexOf('crop')\n\n  if (!!~cropIndex && (cropIndex !== 0)) {\n    settingsEffects = [\n      'crop',\n      ...settingsEffects.slice(0, cropIndex),\n      ...settingsEffects.slice(cropIndex + 1),\n    ]\n  }\n\n  return settingsEffects\n}\n\nexport default getSettingsEffects\n","const getGlobalSettingsByKey = (key) => {\n  const value = window[`UPLOADCARE_${key.toUpperCase()}`]\n\n  return typeof value === 'undefined' ? null : value\n}\n\nexport default getGlobalSettingsByKey\n","const getCropResize = (cropSettings, size) => {\n  const [width, height] = size\n  const downscale =\n    cropSettings.downscale && (width > cropSettings.preferedSize[0] || height > cropSettings.preferedSize[1])\n  const upscale =\n    cropSettings.upscale && (width < cropSettings.preferedSize[0] || height < cropSettings.preferedSize[1])\n\n  if (downscale || upscale) {\n    return cropSettings.preferedSize\n  }\n  else {\n    return null\n  }\n}\n\nexport default getCropResize\n","import getCropResize from './get-crop-resize'\n\nconst autoCrop = (store, settings, uc) => {\n  const {crop} = settings\n  const {image} = store.getState()\n\n  if (!crop) {\n    return\n  }\n\n  // if even one of crop option sets allow free crop,\n  // we don't need to crop automatically\n  if (crop.some(c => !c.preferedSize)) {\n    return\n  }\n\n  if (!image.isImage || image.cdnUrlModifiers || image.crop) {\n    return\n  }\n\n  const info = image.originalImageInfo\n  const size = uc.utils.fitSize(crop[0].preferedSize, [info.width, info.height], true)\n\n  const cropEffect = {\n    originalSize: [info.width, info.height],\n    settings: crop[0],\n    resizeTo: getCropResize(crop[0], size),\n    coords: {\n      left: Math.round((info.width - size[0]) / 2),\n      top: Math.round((info.height - size[1]) / 2),\n      width: size[0],\n      height: size[1],\n    },\n  }\n\n  store.setAppliedEffect({crop: cropEffect})\n  store.rebuildImage()\n}\n\nexport default autoCrop\n","const buildFileInfoCrop = (crop) => {\n  if (crop) {\n    const {coords, resizeTo} = crop\n\n    const cropInfo = {\n      width: coords.width,\n      height: coords.height,\n      left: coords.left,\n      top: coords.top,\n    }\n\n    if (resizeTo) {\n      cropInfo.sw = resizeTo[0]\n      cropInfo.sh = resizeTo[1]\n    }\n\n    return cropInfo\n  }\n  else {\n    return null\n  }\n}\n\nexport default buildFileInfoCrop\n","import {getSettingsCrop, getSettingsEffects} from 'tools'\nimport initialSettings from './initial-settings'\n\nconst configureSettings = (settings) => {\n  const effects = getSettingsEffects(settings.effects)\n  const crop = getSettingsCrop(settings.crop, effects)\n\n  return {\n    ...settings,\n    ...{crop},\n    ...{effects},\n    ...{locale: settings.locale ? settings.locale : initialSettings.locale},\n  }\n}\n\nexport default configureSettings\n","import {getModifiersByEffects, buildFileInfoCrop} from 'tools'\n\nconst createStore = (initialState) => {\n  let state = initialState\n  let listeners = {\n    view: [],\n    imageLoad: [],\n    appliedEffects: [],\n    image: [],\n  }\n\n  const getState = () => state\n\n  const setAppliedEffect = (appliedEffect) => {\n    const appliedEffects = {\n      ...state.appliedEffects,\n      ...appliedEffect,\n    }\n\n    state = {\n      ...state,\n      ...{appliedEffects},\n    }\n    listeners['appliedEffects'].forEach(listener => listener())\n  }\n\n  const setView = (view) => {\n    state = {\n      ...state,\n      ...{view},\n    }\n    listeners['view'].forEach(listener => listener())\n  }\n\n  const setImageLoad = (imageLoad) => {\n    state = {\n      ...state,\n      ...{imageLoad},\n    }\n    listeners['imageLoad'].forEach(listener => listener())\n  }\n\n  const rebuildImage = () => {\n    const {appliedEffects, image} = state\n    const cdnUrlModifiers = getModifiersByEffects(appliedEffects) + state.otherModifiers\n    const crop = buildFileInfoCrop(appliedEffects.crop)\n\n    state.image = {\n      ...image,\n      ...{\n        cdnUrl: image.originalUrl + (cdnUrlModifiers || ''),\n        cdnUrlModifiers,\n        crop,\n      },\n    }\n\n    listeners['image'].forEach(listener => listener())\n  }\n\n  const subscribe = (listener, source) => {\n    listeners[source].push(listener)\n\n    return () => {\n      listeners[source] = listeners[source].filter(l => l !== listener)\n    }\n  }\n\n  const subscribeToAppliedEffects = (listener) => subscribe(listener, 'appliedEffects')\n  const subscribeToView = (listener) => subscribe(listener, 'view')\n  const subscribeToImageLoad = (listener) => subscribe(listener, 'imageLoad')\n  const subscribeToImage = (listener) => subscribe(listener, 'image')\n\n  return {\n    getState,\n    setView,\n    setImageLoad,\n    setAppliedEffect,\n    rebuildImage,\n    subscribeToView,\n    subscribeToImageLoad,\n    subscribeToImage,\n    subscribeToAppliedEffects,\n  }\n}\n\nexport default createStore\n","import createStore from './create-store'\nimport initialState from './initial-state'\nimport {effectsFromModifiers, getAppliedEffects} from 'tools'\n\nconst configureStore = (image, settings) => {\n  const {effects, crop} = settings\n  const appliedEffects = getAppliedEffects(effects)\n  const appliedEffectsFromModifiers = effectsFromModifiers(image.cdnUrlModifiers, effects, crop)\n\n  return createStore({\n    ...initialState,\n    ...{image},\n    ...{\n      appliedEffects: {\n        ...appliedEffects,\n        ...appliedEffectsFromModifiers.effects,\n      },\n    },\n    ...{otherModifiers: appliedEffectsFromModifiers.otherModifiers},\n  })\n}\n\nexport default configureStore\n","import {createNode} from 'tools'\nimport template from './Content.html'\n\nconst Content = () => {\n  let $element\n\n  const getElement = () => {\n    if (!$element) {\n      render()\n    }\n\n    return $element\n  }\n\n  const render = () => {\n    $element = createNode(template())\n  }\n\n  const appendChild = ($child) => {\n    if (!$element) return\n\n    $element.appendChild($child)\n  }\n\n  return {\n    getElement,\n    appendChild,\n  }\n}\n\nexport default Content\n","import {createNode} from 'tools'\nimport cn from './CropButton.pcss'\nimport template from './CropButton.html'\n\nconst APPLIED_CLASS_NAME = 'uploadcare--crop-sizes__item_current'\nconst ICON_FREE_CLASS_NAME = 'uploadcare--crop-sizes__icon_free'\n\nconst CropButton = (props) => {\n  let $element\n  const {\n    size,\n    title,\n    onClick,\n  } = props\n  let state = {\n    applied: props.applied || false,\n    disabled: props.disabled || false,\n  }\n\n  const getElement = () => {\n    if (!$element) {\n      render()\n    }\n\n    return $element\n  }\n\n  const render = () => {\n    $element = createNode(template({\n      title,\n      cn,\n    }))\n\n    setupIcon()\n\n    if (state.applied) {\n      $element.classList.add(APPLIED_CLASS_NAME)\n    }\n\n    $element.addEventListener('click', handleClick)\n  }\n\n  const setupIcon = () => {\n    let $icon = $element.querySelector(`.${cn['crop-button__icon']}`)\n    const {width, height} = size\n\n    if (width && height) {\n      $icon.style.width = width\n      $icon.style.height = height\n    }\n    else {\n      $icon.innerHTML = `\n<svg width=\"32\" height=\"32\" role=\"presentation\" class=\"uploadcare--icon\">\n  <use xlink:href=\"#uploadcare--icon-crop-free\"/>\n</svg>\n      `\n      $icon.classList.add(ICON_FREE_CLASS_NAME)\n    }\n  }\n\n  const handleClick = () => {\n    if (state.disabled || !onClick) return\n\n    onClick()\n  }\n\n  const toggleApplied = (applied) => {\n    if (!$element || (state.applied === applied)) return\n\n    state.applied = applied\n\n    $element.classList[(applied) ? 'add' : 'remove'](APPLIED_CLASS_NAME)\n  }\n\n  const toggleDisabled = (disabled) => {\n    if (!$element || (state.disabled === disabled)) return\n\n    state.disabled = disabled\n\n    $element.setAttribute('aria-disabled', disabled)\n    $element.setAttribute('tabindex', disabled ? '-1' : '0')\n  }\n\n  return {\n    getElement,\n    toggleApplied,\n    toggleDisabled,\n  }\n}\n\nexport default CropButton\n","import {createNode} from 'tools'\nimport cn from './Crops.pcss'\nimport template from './Crops.html'\nimport {CropButton} from 'components'\n\nconst Crops = (props) => {\n  let $element\n  let buttons = []\n  const {\n    crops,\n    onCropClick,\n  } = props\n  let state = {currentCrop: props.currentCrop || 0}\n\n  const getElement = () => {\n    if (!$element) {\n      render()\n    }\n\n    return $element\n  }\n\n  const render = () => {\n    $element = createNode(template({cn}))\n\n    crops.forEach(crop => {\n      const {index, size, title} = crop\n\n      buttons[index] = new CropButton({\n        size,\n        title,\n        applied: state.currentCrop === index,\n        onClick: () => {\n          if (state.currentCrop === index) return\n\n          updateApplied(index)\n          onCropClick(crop)\n        },\n      })\n    })\n\n    buttons.forEach(button => $element.appendChild(button.getElement()))\n  }\n\n  const toggleDisabled = (isDisabled) => {\n    if (!buttons) return\n\n    buttons.forEach(button => button.toggleDisabled(isDisabled))\n  }\n\n  const updateApplied = (currentCrop) => {\n    if (!buttons) return\n\n    state.currentCrop = currentCrop\n\n    buttons.forEach((button, index) => button.toggleApplied((index === currentCrop)))\n  }\n\n  return {\n    getElement,\n    toggleDisabled,\n    updateApplied,\n  }\n}\n\nexport default Crops\n","import {createNode} from 'tools'\nimport cn from './Icon.pcss'\nimport * as icons from 'images'\n\nconst Icon = (props) => {\n  const {name} = props\n\n  if (!icons[name]) {\n    throw new Error(`Icon with name \"${name}\" doesn't exist.`)\n  }\n\n  let $element\n\n  const getElement = () => {\n    if (!$element) {\n      render()\n    }\n\n    return $element\n  }\n\n  const render = () => {\n    $element = createNode(icons[name]())\n\n    $element.setAttribute('class', `${$element.getAttribute('class')} ${cn['icon']}`)\n  }\n\n  return {getElement}\n}\n\nexport default Icon\n","import {createNode} from 'tools'\nimport cn from './EffectButton.pcss'\nimport template from './EffectButton.html'\nimport Icon from '../Icon/Icon'\n\nconst EffectButton = (props) => {\n  let $element\n  const {\n    effect,\n    title,\n    onClick,\n  } = props\n  let state = {\n    applied: props.applied || false,\n    disabled: props.disabled || false,\n  }\n\n  const getElement = () => {\n    if (!$element) {\n      render()\n    }\n\n    return $element\n  }\n\n  const getEffect = () => effect\n\n  const render = () => {\n    const _icon = new Icon({name: effect})\n\n    $element = createNode(template({\n      title,\n      cn,\n    }))\n\n    $element.appendChild(_icon.getElement())\n\n    if (state.applied) {\n      $element.classList.add(cn['effect-button_applied'])\n    }\n\n    $element.addEventListener('click', handleClick)\n    $element.addEventListener('keypress', (e) => {\n      if (e.code === 'Enter') {\n        $element.dispatchEvent(new Event('click'))\n        e.preventDefault()\n        e.stopPropagation()\n      }\n    })\n  }\n\n  const handleClick = () => {\n    if (state.disabled || !onClick) return\n\n    onClick()\n  }\n\n  const toggleApplied = (applied) => {\n    if (!$element || (state.applied === applied)) return\n\n    state.applied = applied\n\n    $element.classList[(applied) ? 'add' : 'remove'](cn['effect-button_applied'])\n  }\n\n  const toggleDisabled = (disabled) => {\n    if (!$element || (state.disabled === disabled)) return\n\n    state.disabled = disabled\n\n    $element.setAttribute('aria-disabled', disabled)\n    $element.setAttribute('tabindex', disabled ? -1 : 0)\n  }\n\n  return {\n    getElement,\n    getEffect,\n    toggleApplied,\n    toggleDisabled,\n  }\n}\n\nexport default EffectButton\n","import {createNode} from 'tools'\nimport cn from './Effects.pcss'\nimport template from './Effects.html'\nimport {EffectButton} from 'components'\n\nconst Effects = (props) => {\n  let $element\n  let buttons = []\n  const {\n    effects,\n    titles,\n    onEffectClick,\n  } = props\n  let state = {appliedEffects: props.appliedEffects}\n\n  const getElement = () => {\n    if (!$element) {\n      render()\n    }\n\n    return $element\n  }\n\n  const render = () => {\n    $element = createNode(template({cn}))\n\n    effects.forEach(effect => {\n      const title = titles[effect]\n\n      buttons.push(new EffectButton({\n        effect,\n        title,\n        applied: !!state.appliedEffects[effect],\n        onClick: () => onEffectClick(effect),\n      }))\n    })\n\n    buttons.forEach(button => $element.appendChild(button.getElement()))\n  }\n\n  const toggleDisabled = (isDisabled) => {\n    if (!buttons) return\n\n    buttons.forEach(button => button.toggleDisabled(isDisabled))\n  }\n\n  const updateApplied = (appliedEffects) => {\n    if (!buttons) return\n\n    state.appliedEffects = appliedEffects\n\n    buttons.forEach(button => button.toggleApplied(!!appliedEffects[button.getEffect()]))\n  }\n\n  return {\n    getElement,\n    toggleDisabled,\n    updateApplied,\n  }\n}\n\nexport default Effects\n","import {createNode} from 'tools'\nimport cn from './Footer.pcss'\nimport template from './Footer.html'\n\nconst Footer = (props) => {\n  let $element\n  let $additionsElement\n  let $doneElement\n  let $cancelElement\n  const {\n    locale,\n    onDone,\n    onCancel,\n  } = props\n\n  const getElement = () => {\n    if (!$element) {\n      render()\n    }\n\n    return $element\n  }\n\n  const render = () => {\n    $element = createNode(template({\n      cn,\n      locale,\n    }))\n\n    $additionsElement = $element.querySelector(`.${cn.additions}`)\n    $doneElement = $element.querySelector(`.${cn.done}`)\n    $cancelElement = $element.querySelector(`.${cn.cancel}`)\n\n    $doneElement.addEventListener('click', onDone)\n    $cancelElement.addEventListener('click', onCancel)\n  }\n\n  const empty = () => {\n    if (!$element) return\n\n    while ($additionsElement.firstChild) {\n      $additionsElement.removeChild($additionsElement.firstChild)\n    }\n  }\n\n  const appendChild = (child) => {\n    if (!$element) return\n\n    $additionsElement.appendChild(child)\n  }\n\n  const toggleDisabled = (isDisabled) => {\n    if (!$doneElement) return\n\n    $doneElement.disabled = isDisabled\n  }\n\n  const updateDoneTitle = (newTitle = null) => {\n    $doneElement.innerText = (newTitle) ? newTitle : locale.done\n  }\n\n  return {\n    getElement,\n    empty,\n    appendChild,\n    toggleDisabled,\n    updateDoneTitle,\n  }\n}\n\nexport default Footer\n","import {createNode} from 'tools'\nimport cn from './Header.pcss'\nimport template from './Header.html'\n\nconst Header = (props) => {\n  let $element\n  let $titleElement\n  const {title} = props\n\n  const getElement = () => {\n    if (!$element) {\n      render()\n    }\n\n    return $element\n  }\n\n  const render = () => {\n    $element = createNode(template({\n      title,\n      cn,\n    }))\n\n    $titleElement = $element.querySelector(`.${cn.title}`)\n  }\n\n  const updateTitle = (title) => {\n    if (!$titleElement) return\n\n    $titleElement.innerText = title\n  }\n\n  return {\n    getElement,\n    updateTitle,\n  }\n}\n\nexport default Header\n","import {createNode} from 'tools'\nimport cn from './Image.pcss'\nimport template from './Image.html'\n\nconst Image = (props) => {\n  let $element\n  let $img\n  const {\n    imageUrl,\n    onUpdate,\n    onLoad,\n    onFail,\n  } = props\n\n  const getElement = () => {\n    if (!$element) {\n      render()\n    }\n\n    return $element\n  }\n\n  const getImg = () => $img\n\n  const render = () => {\n    $element = createNode(template({\n      cn,\n      imageUrl,\n    }))\n\n    $img = $element.querySelector(`.${cn.image}`)\n\n    $img.addEventListener('load', () => onLoad())\n    $img.addEventListener('error', () => {\n      if ($img.complete) {\n        onFail()\n      }\n    })\n    $img.addEventListener('abort', () => onFail())\n  }\n\n  const updateImageUrl = (imageUrl) => {\n    if ($img.src === imageUrl) {\n      // safari do not call onload event when url is the same\n      // so we manually clear it before update\n      $img.removeAttribute('src')\n    }\n\n    $img.src = imageUrl\n\n    onUpdate()\n  }\n\n  return {\n    getElement,\n    getImg,\n    updateImageUrl,\n  }\n}\n\nexport default Image\n","import {createNode} from 'tools'\nimport cn from './Range.pcss'\nimport template from './Range.html'\n\nconst Range = (props) => {\n  let $element\n  const {\n    min = 0,\n    max = 100,\n    step = 1,\n    value = 50,\n    onChange,\n  } = props\n\n  const getElement = () => {\n    if (!$element) {\n      render()\n    }\n\n    return $element\n  }\n\n  const render = () => {\n    $element = createNode(template({\n      cn,\n      min,\n      max,\n      step,\n      value,\n    }))\n\n    $element.addEventListener('change', (e) => onChange(e.target.value))\n  }\n\n  return {getElement}\n}\n\nexport default Range\n","import {createNode, getModifiersByEffects, getNextRotateValue, getCropResize} from 'tools'\nimport template from './Tab.html'\nimport {Content, Crops, Effects, Footer, Header, Image, Range} from 'components'\n\nconst ranges = {\n  enhance: [0, 100],\n  sharp: [0, 20],\n  blur: [0, 100, 5],\n}\n\nconst Tab = (props) => {\n  let $element\n  let _header\n  let _content\n  let _footer\n  let _image\n  let _effects\n  let _crops\n  const {\n    uc,\n    store,\n    settings,\n    onDone,\n    onFail,\n  } = props\n  let state = {\n    cropWidget: null,\n    currentCrop: 0,\n  }\n  const t = uc.locale.t\n  const CropWidget = uc.crop.CropWidget\n  const previewModifiers = '-/preview/1162x693/-/setfill/ffffff/-/format/jpeg/-/progressive/yes/'\n\n  const getElement = () => {\n    if (!$element) {\n      render()\n    }\n\n    return $element\n  }\n\n  const render = () => {\n    const {view, appliedEffects, image} = store.getState()\n\n    $element = createNode(template())\n\n    _header = new Header({title: headerTitle(view)})\n\n    _footer = new Footer({\n      locale: {\n        done: t('dialog.tabs.preview.done'),\n        cancel: t('dialog.tabs.preview.image.change'),\n      },\n      onDone: handleDone,\n      onCancel: handleCancel,\n    })\n\n    _content = new Content()\n\n    let imageUrl = image.cdnUrl + previewModifiers\n\n    if (settings.previewUrlCallback) {\n      imageUrl = settings.previewUrlCallback(imageUrl, image)\n    }\n\n    _image = new Image({\n      imageUrl: imageUrl,\n      onUpdate: () => store.setImageLoad('start'),\n      onLoad: () => store.setImageLoad('load'),\n      onFail: () => store.setImageLoad('fail'),\n    })\n\n    $element.appendChild(_header.getElement())\n    $element.appendChild(_content.getElement())\n    $element.appendChild(_footer.getElement())\n\n    _content.appendChild(_image.getElement())\n\n    const {effects} = settings\n    const titles = effects.reduce((titles, effect) => {\n      titles[effect] = effectTitle(effect)\n\n      return titles\n    }, {})\n\n    _effects = new Effects({\n      effects,\n      titles,\n      appliedEffects,\n      onEffectClick: handleEffectClick,\n    })\n\n    _footer.appendChild(_effects.getElement())\n\n    store.subscribeToAppliedEffects(handleAppliedEffectsChange)\n    store.subscribeToView(handleViewChange)\n    store.subscribeToImage(handleImageChange)\n    store.subscribeToImageLoad(handleImageLoadChange)\n  }\n\n  const headerTitle = (view) => (view === 'preview') ? t('dialog.tabs.preview.image.title') : effectTitle(view)\n\n  const effectTitle = (effect) => t(`effects.captions.${effect}`)\n\n  const deleteCropWidget = () => {\n    if (!state.cropWidget || !state.cropWidget.__api) return\n\n    state.cropWidget.__api.release()\n    state.cropWidget.__api.destroy()\n    _image.getImg().removeAttribute('style')\n  }\n\n  const handleDone = (e) => {\n    const {view} = store.getState()\n\n    if (view === 'preview') {\n      onDone()\n    }\n    else {\n      e.stopPropagation()\n\n      if (view === 'crop') {\n        finishCrop()\n      }\n\n      store.setView('preview')\n    }\n  }\n\n  const handleCancel = (e) => {\n    const {view, appliedEffects} = store.getState()\n    const {crop: cropSettings} = settings\n\n    if (view !== 'preview') {\n      e.stopPropagation()\n\n      let value = 0\n\n      if (view === 'crop') {\n        const freeAllowed = cropSettings.some(c => !c.preferedSize)\n\n        value = freeAllowed ? null : appliedEffects[view]\n        deleteCropWidget()\n      }\n      store.setAppliedEffect({[view]: value})\n      store.setView('preview')\n    }\n  }\n\n  const handleEffectClick = (effect) => {\n    const {appliedEffects} = store.getState()\n\n    if (effect === 'rotate') {\n      store.setAppliedEffect({rotate: getNextRotateValue(appliedEffects.rotate)})\n\n      return\n    }\n\n    if (typeof appliedEffects[effect] === 'boolean') {\n      store.setAppliedEffect({[effect]: !appliedEffects[effect]})\n\n      return\n    }\n\n    if (effect === 'crop' || typeof appliedEffects[effect] === 'number') {\n      store.setView(effect)\n    }\n  }\n\n  const handleRangeChange = (value) => {\n    const {view} = store.getState()\n\n    store.setAppliedEffect({[view]: parseInt(value)})\n  }\n\n  const handleAppliedEffectsChange = () => {\n    store.rebuildImage()\n\n    const {appliedEffects} = store.getState()\n\n    _effects.updateApplied(appliedEffects)\n  }\n\n  const handleViewChange = () => {\n    const {view, appliedEffects, image} = store.getState()\n\n    _header.updateTitle(headerTitle(view))\n\n    if (view === 'preview') {\n      _footer.updateDoneTitle()\n    }\n    else {\n      _footer.updateDoneTitle(t('effects.apply'))\n    }\n\n    _footer.empty()\n\n    if (view === 'preview') {\n      _footer.appendChild(_effects.getElement())\n\n      return\n    }\n\n    if (view === 'crop') {\n      showCrops()\n\n      let imageUrl = image.originalUrl +\n        (getModifiersByEffects([{crop: null}], false, false) || '') +\n        previewModifiers\n\n      if (settings.previewUrlCallback) {\n        imageUrl = settings.previewUrlCallback(imageUrl, image)\n      }\n\n      _image.updateImageUrl(imageUrl)\n\n      return\n    }\n\n    if (ranges[view]) {\n      let value = appliedEffects[view]\n\n      if (value === 0) {\n        value = ranges[view][1] / 2\n\n        store.setAppliedEffect({[view]: value})\n      }\n\n      const _range = new Range({\n        min: ranges[view][0],\n        max: ranges[view][1],\n        step: ranges[view][2],\n        value,\n        onChange: handleRangeChange,\n      })\n\n      _footer.appendChild(_range.getElement())\n    }\n  }\n\n  const handleImageChange = () => {\n    const {image} = store.getState()\n    let imageUrl = image.cdnUrl + previewModifiers\n\n    if (settings.previewUrlCallback) {\n      imageUrl = settings.previewUrlCallback(imageUrl, image)\n    }\n\n    _image.updateImageUrl(imageUrl)\n  }\n\n  const handleImageLoadChange = () => {\n    const {view, imageLoad} = store.getState()\n\n    switch (imageLoad) {\n      case 'start':\n        _footer.toggleDisabled(true)\n\n        if (view === 'preview') {\n          _effects.toggleDisabled(true)\n        }\n        if (view === 'crop') {\n          _crops.toggleDisabled(true)\n        }\n        break\n      case 'load':\n        _footer.toggleDisabled(false)\n\n        if (view === 'preview') {\n          _effects.toggleDisabled(false)\n        }\n        else if (view === 'crop') {\n          startCrop()\n          _crops.toggleDisabled(false)\n        }\n        break\n      case 'fail':\n        onFail()\n        break\n    }\n  }\n\n  const showCrops = () => {\n    const {crop: cropSettings} = settings\n    const {appliedEffects} = store.getState()\n    const {crop} = appliedEffects\n\n    state.currentCrop = (crop && crop.index !== undefined) ? crop.index : 0\n\n    _crops = new Crops({\n      crops: cropSettings.map((c, i) => {\n        const {description, width, height} = getCropSizeInfo(c)\n\n        return {\n          index: i,\n          settings: c,\n          title: description,\n          size: {\n            width,\n            height,\n          },\n        }\n      }),\n      currentCrop: state.currentCrop,\n      onCropClick: (crop) => {\n        state.currentCrop = crop.index\n        if (state.cropWidget) {\n          state.cropWidget.setCrop(crop.settings)\n        }\n      },\n    })\n\n    _footer.appendChild(_crops.getElement())\n  }\n\n  const startCrop = () => {\n    const {crop: cropSettings} = settings\n    const {appliedEffects, image} = store.getState()\n    const {crop} = appliedEffects\n    const {width, height} = image.originalImageInfo\n    const size = [width, height]\n\n    state.cropWidget = new CropWidget(uc.jQuery(_image.getImg()), size, cropSettings[state.currentCrop])\n\n    if (crop && crop.coords) {\n      state.cropWidget.setSelection(crop.coords)\n    }\n  }\n\n  const finishCrop = () => {\n    const {crop, originalSize} = state.cropWidget\n    const coords = state.cropWidget.getSelection()\n\n    deleteCropWidget()\n\n    store.setAppliedEffect({\n      crop: {\n        originalSize,\n        coords,\n        resizeTo: getCropResize(crop, [coords.width, coords.height]),\n        settings: crop,\n        index: state.currentCrop,\n      },\n    })\n  }\n\n  const getCropSizeInfo = (crop) => {\n    const {preferedSize} = crop\n\n    let description = t('dialog.tabs.preview.crop.free')\n    let width\n    let height\n\n    if (preferedSize) {\n      const gcd = uc.utils.gcd(preferedSize[0], preferedSize[1])\n      const size = uc.utils.fitSize(preferedSize, [30, 30], true)\n\n      description = `${preferedSize[0] / gcd}:${preferedSize[1] / gcd}`\n      width = `${Math.max(20, size[0])}px`\n      height = `${Math.max(12, size[1])}px`\n    }\n\n    return {\n      description,\n      width,\n      height,\n    }\n  }\n\n  return {getElement}\n}\n\nexport default Tab\n","import {customExtends, configureTranslations, getGlobalSettingsByKey, autoCrop} from 'tools'\nimport configureSettings from './configure-settings'\nimport configureStore from './configure-store'\nimport {Tab} from 'components'\n\nfunction createPreviewTabEffects(PreviewTab, uc) {\n  customExtends(PreviewTabEffects, PreviewTab)\n\n  function PreviewTabEffects(container, button, dialogApi, settings, name) {\n    PreviewTabEffects.__super__.constructor.call(this, container, button, dialogApi, settings, name)\n  }\n\n  PreviewTabEffects.prototype.__setState = function(state, data) {\n    if (state === 'image') {\n      if (data.info) {\n        const globalEffects = getGlobalSettingsByKey('effects')\n\n        // Trying to get effects settings from global if widget doesn't have them\n        if (typeof this.settings.effects === 'undefined' && globalEffects) {\n          this.settings.effects = globalEffects\n        }\n\n        const settings = configureSettings(this.settings)\n        const store = configureStore(data.info, settings)\n        const onDone = () => {\n          const newFile = this.file.then((info) => {\n            const {cdnUrl, cdnUrlModifiers, crop} = store.getState().image\n\n            return {\n              ...info,\n              ...{\n                cdnUrl,\n                cdnUrlModifiers,\n                crop,\n              },\n            }\n          })\n\n          this.dialogApi.fileColl.replace(this.file, newFile)\n        }\n        const onFail = () => {\n          this.file = null\n          this.__setState('error', {error: 'loadImage'})\n        }\n\n        autoCrop(store, settings, uc)\n\n        const currentLocale = settings.locale\n\n        uc.locale.translations = configureTranslations(uc.locale.translations, currentLocale)\n        uc.locale.rebuild()\n\n        const tab = new Tab({\n          uc,\n          store,\n          settings,\n          onDone,\n          onFail,\n        })\n\n        const container = this.container[0]\n\n        container.innerHTML = ''\n        Array.prototype.slice.call((tab.getElement()).children)\n          .forEach(child => container.appendChild(child))\n\n        store.setImageLoad('start')\n      }\n    }\n    else {\n      PreviewTabEffects.__super__.__setState.call(this, state, data)\n    }\n  }\n\n  PreviewTabEffects.prototype.initImage = function() {}\n\n  return PreviewTabEffects\n}\n\nexport default createPreviewTabEffects\n","import uploadcare from 'uploadcare-widget'\nimport createPreviewTabEffects from './create-preview-tab-effects'\n\nfunction uploadcareTabEffects(container, button, dialogApi, settings, name) {\n  uploadcare.plugin(function(uc) {\n    if (settings.multiple) {\n      return new uc.widget.tabs.PreviewTabMultiple(container, button, dialogApi, settings, name)\n    }\n\n    const PreviewTabEffects = createPreviewTabEffects(uc.widget.tabs.PreviewTab, uc)\n\n    return new PreviewTabEffects(container, button, dialogApi, settings, name)\n  })\n}\n\nexport default uploadcareTabEffects\n"],"names":["isLocaleAvailable","availableLocales","Object","keys","locales","indexOf","locale","configureTranslations","translations","currentLocale","extendedTranslations","isCurrentLocaleAvailable","defaultTranslations","initialSettings","isLocaleAvailableInTranslations","hasOwnProperty","currentLocaleTranslations","createNode","html","DOMParser","parseFromString","body","firstChild","customExtends","child","parent","key","prototype","call","Ctor","constructor","__super__","effectsDefaults","modifierRegExp","effectsFromModifiers","cdnUrlModifiers","settingsEffects","settingsCrop","effects","otherModifiers","replace","forEach","settingsEffect","foundModifier","match","effectValue","resizeTo","cropWidth","parseInt","cropHeight","cropIndex","findIndex","settings","preferedSize","w","h","sameSize","sameRatio","toPrecision","undefined","getAppliedEffects","initialAppliedEffects","initialState","appliedEffects","getModifiersByCrop","size","crop","originalSize","coords","width","height","center","left","top","modifiers","wholeImage","join","getModifiersByEffects","withCrop","withRFM","effect","rotateValues","getNextRotateValue","currentValue","currentIndex","length","getSettingsCrop","ALL_EFFECTS","getSettingsEffects","value","split","Array","isArray","slice","getGlobalSettingsByKey","window","toUpperCase","getCropResize","cropSettings","downscale","upscale","autoCrop","store","uc","getState","image","some","c","isImage","info","originalImageInfo","utils","fitSize","cropEffect","Math","round","setAppliedEffect","rebuildImage","buildFileInfoCrop","cropInfo","sw","sh","configureSettings","createStore","state","listeners","appliedEffect","listener","setView","view","setImageLoad","imageLoad","originalUrl","subscribe","source","push","filter","l","subscribeToAppliedEffects","subscribeToView","subscribeToImageLoad","subscribeToImage","configureStore","appliedEffectsFromModifiers","Content","$element","getElement","render","template","appendChild","$child","APPLIED_CLASS_NAME","ICON_FREE_CLASS_NAME","CropButton","props","title","onClick","applied","disabled","classList","add","addEventListener","handleClick","setupIcon","$icon","querySelector","cn","style","innerHTML","toggleApplied","toggleDisabled","setAttribute","Crops","buttons","crops","onCropClick","currentCrop","index","button","isDisabled","updateApplied","Icon","name","icons","Error","getAttribute","EffectButton","getEffect","_icon","e","code","dispatchEvent","Event","preventDefault","stopPropagation","Effects","titles","onEffectClick","Footer","$additionsElement","$doneElement","$cancelElement","onDone","onCancel","additions","done","cancel","empty","removeChild","updateDoneTitle","newTitle","innerText","Header","$titleElement","updateTitle","Image","$img","imageUrl","onUpdate","onLoad","onFail","getImg","complete","updateImageUrl","src","removeAttribute","Range","min","max","step","onChange","target","ranges","Tab","_header","_content","_footer","_image","_effects","_crops","t","CropWidget","previewModifiers","headerTitle","handleDone","handleCancel","cdnUrl","previewUrlCallback","reduce","effectTitle","handleEffectClick","handleAppliedEffectsChange","handleViewChange","handleImageChange","handleImageLoadChange","deleteCropWidget","cropWidget","__api","release","destroy","freeAllowed","rotate","handleRangeChange","_range","showCrops","map","i","getCropSizeInfo","description","setCrop","startCrop","jQuery","setSelection","finishCrop","getSelection","gcd","createPreviewTabEffects","PreviewTab","PreviewTabEffects","container","dialogApi","__setState","data","globalEffects","newFile","file","then","fileColl","error","rebuild","tab","children","initImage","uploadcareTabEffects","plugin","multiple","widget","tabs","PreviewTabMultiple"],"mappings":"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"}