{"version":3,"file":"webgl.js","sources":["../../src/ol/webgl.js"],"sourcesContent":["/**\n * @module ol/webgl\n */\n\n\n/**\n * Constants taken from goog.webgl\n */\n\n\n/**\n * @const\n * @type {number}\n */\nexport const ONE = 1;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const SRC_ALPHA = 0x0302;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const COLOR_ATTACHMENT0 = 0x8CE0;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const COLOR_BUFFER_BIT = 0x00004000;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TRIANGLES = 0x0004;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TRIANGLE_STRIP = 0x0005;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const ONE_MINUS_SRC_ALPHA = 0x0303;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const ARRAY_BUFFER = 0x8892;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const ELEMENT_ARRAY_BUFFER = 0x8893;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const STREAM_DRAW = 0x88E0;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const STATIC_DRAW = 0x88E4;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const DYNAMIC_DRAW = 0x88E8;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const CULL_FACE = 0x0B44;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const BLEND = 0x0BE2;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const STENCIL_TEST = 0x0B90;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const DEPTH_TEST = 0x0B71;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const SCISSOR_TEST = 0x0C11;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const UNSIGNED_BYTE = 0x1401;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const UNSIGNED_SHORT = 0x1403;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const UNSIGNED_INT = 0x1405;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const FLOAT = 0x1406;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const RGBA = 0x1908;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const FRAGMENT_SHADER = 0x8B30;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const VERTEX_SHADER = 0x8B31;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const LINK_STATUS = 0x8B82;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const LINEAR = 0x2601;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE_MAG_FILTER = 0x2800;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE_MIN_FILTER = 0x2801;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE_WRAP_S = 0x2802;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE_WRAP_T = 0x2803;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE_2D = 0x0DE1;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const TEXTURE0 = 0x84C0;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const CLAMP_TO_EDGE = 0x812F;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const COMPILE_STATUS = 0x8B81;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const FRAMEBUFFER = 0x8D40;\n\n\n/** end of goog.webgl constants\n */\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst CONTEXT_IDS = [\n  'experimental-webgl',\n  'webgl',\n  'webkit-3d',\n  'moz-webgl'\n];\n\n\n/**\n * @param {HTMLCanvasElement} canvas Canvas.\n * @param {Object=} opt_attributes Attributes.\n * @return {WebGLRenderingContext} WebGL rendering context.\n */\nexport function getContext(canvas, opt_attributes) {\n  const ii = CONTEXT_IDS.length;\n  for (let i = 0; i < ii; ++i) {\n    try {\n      const context = canvas.getContext(CONTEXT_IDS[i], opt_attributes);\n      if (context) {\n        return /** @type {!WebGLRenderingContext} */ (context);\n      }\n    } catch (e) {\n      // pass\n    }\n  }\n  return null;\n}\n\n\n/**\n * Include debuggable shader sources.  Default is `true`. This should be set to\n * `false` for production builds.\n * @type {boolean}\n */\nexport const DEBUG = true;\n\n\n/**\n * The maximum supported WebGL texture size in pixels. If WebGL is not\n * supported, the value is set to `undefined`.\n * @type {number|undefined}\n */\nlet MAX_TEXTURE_SIZE; // value is set below\n\n\n/**\n * List of supported WebGL extensions.\n * @type {Array<string>}\n */\nlet EXTENSIONS; // value is set below\n\n\n/**\n * True if both OpenLayers and browser support WebGL.\n * @type {boolean}\n * @api\n */\nlet HAS = false;\n\n//TODO Remove side effects\nif (typeof window !== 'undefined' && 'WebGLRenderingContext' in window) {\n  try {\n    const canvas = /** @type {HTMLCanvasElement} */ (document.createElement('canvas'));\n    const gl = getContext(canvas, {failIfMajorPerformanceCaveat: true});\n    if (gl) {\n      HAS = true;\n      MAX_TEXTURE_SIZE = /** @type {number} */ (gl.getParameter(gl.MAX_TEXTURE_SIZE));\n      EXTENSIONS = gl.getSupportedExtensions();\n    }\n  } catch (e) {\n    // pass\n  }\n}\n\nexport {HAS, MAX_TEXTURE_SIZE, EXTENSIONS};\n"],"names":["const","let"],"mappings":"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"}