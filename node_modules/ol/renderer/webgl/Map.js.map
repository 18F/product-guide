{"version":3,"file":"Map.js","sources":["../../../../src/ol/renderer/webgl/Map.js"],"sourcesContent":["/**\n * @module ol/renderer/webgl/Map\n */\n\nimport {stableSort} from '../../array.js';\nimport {CLASS_UNSELECTABLE} from '../../css.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {listen} from '../../events.js';\nimport {visibleAtResolution} from '../../layer/Layer.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport WebGLImmediateRenderer from '../../render/webgl/Immediate.js';\nimport MapRenderer, {sortByZIndex} from '../Map.js';\nimport SourceState from '../../source/State.js';\nimport LRUCache from '../../structs/LRUCache.js';\nimport PriorityQueue from '../../structs/PriorityQueue.js';\nimport {BLEND, CLAMP_TO_EDGE, COLOR_BUFFER_BIT, CULL_FACE, DEPTH_TEST, FRAMEBUFFER,\n  getContext, LINEAR, ONE, ONE_MINUS_SRC_ALPHA, RGBA, SCISSOR_TEST, SRC_ALPHA,\n  STENCIL_TEST, TEXTURE0, TEXTURE_2D, TEXTURE_MAG_FILTER, TEXTURE_MIN_FILTER,\n  TEXTURE_WRAP_S, TEXTURE_WRAP_T, UNSIGNED_BYTE} from '../../webgl.js';\nimport WebGLContext from '../../webgl/Context.js';\nimport ContextEventType from '../../webgl/ContextEventType.js';\n\n\n/**\n * @typedef {Object} TextureCacheEntry\n * @property {number} magFilter\n * @property {number} minFilter\n * @property {WebGLTexture} texture\n */\n\n\n/**\n * Texture cache high water mark.\n * @type {number}\n */\nconst WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK = 1024;\n\n\n/**\n * @classdesc\n * WebGL map renderer.\n * @api\n */\nclass WebGLMapRenderer extends MapRenderer {\n\n  /**\n   * @param {import(\"../../PluggableMap.js\").default} map Map.\n   */\n  constructor(map) {\n    super(map);\n\n    const container = map.getViewport();\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = /** @type {HTMLCanvasElement} */\n      (document.createElement('canvas'));\n    this.canvas_.style.width = '100%';\n    this.canvas_.style.height = '100%';\n    this.canvas_.style.display = 'block';\n    this.canvas_.className = CLASS_UNSELECTABLE;\n    container.insertBefore(this.canvas_, container.childNodes[0] || null);\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.clipTileCanvasWidth_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.clipTileCanvasHeight_ = 0;\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.clipTileContext_ = createCanvasContext2D();\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = true;\n\n    /**\n     * @private\n     * @type {WebGLRenderingContext}\n     */\n    this.gl_ = getContext(this.canvas_, {\n      antialias: true,\n      depth: true,\n      failIfMajorPerformanceCaveat: true,\n      preserveDrawingBuffer: false,\n      stencil: true\n    });\n\n    /**\n     * @private\n     * @type {import(\"../../webgl/Context.js\").default}\n     */\n    this.context_ = new WebGLContext(this.canvas_, this.gl_);\n\n    listen(this.canvas_, ContextEventType.LOST,\n      this.handleWebGLContextLost, this);\n    listen(this.canvas_, ContextEventType.RESTORED,\n      this.handleWebGLContextRestored, this);\n\n    /**\n     * @private\n     * @type {import(\"../../structs/LRUCache.js\").default<TextureCacheEntry|null>}\n     */\n    this.textureCache_ = new LRUCache();\n\n    /**\n     * @private\n     * @type {import(\"../../coordinate.js\").Coordinate}\n     */\n    this.focus_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../../structs/PriorityQueue.js\").default<Array>}\n     */\n    this.tileTextureQueue_ = new PriorityQueue(\n      /**\n       * @param {Array<*>} element Element.\n       * @return {number} Priority.\n       * @this {WebGLMapRenderer}\n       */\n      (function(element) {\n        const tileCenter = /** @type {import(\"../../coordinate.js\").Coordinate} */ (element[1]);\n        const tileResolution = /** @type {number} */ (element[2]);\n        const deltaX = tileCenter[0] - this.focus_[0];\n        const deltaY = tileCenter[1] - this.focus_[1];\n        return 65536 * Math.log(tileResolution) +\n              Math.sqrt(deltaX * deltaX + deltaY * deltaY) / tileResolution;\n      }).bind(this),\n      /**\n       * @param {Array<*>} element Element.\n       * @return {string} Key.\n       */\n      function(element) {\n        return (\n          /** @type {import(\"../../Tile.js\").default} */ (element[0]).getKey()\n        );\n      });\n\n\n    /**\n     * @param {import(\"../../PluggableMap.js\").default} map Map.\n     * @param {?import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {boolean} false.\n     * @this {WebGLMapRenderer}\n     */\n    this.loadNextTileTexture_ =\n        function(map, frameState) {\n          if (!this.tileTextureQueue_.isEmpty()) {\n            this.tileTextureQueue_.reprioritize();\n            const element = this.tileTextureQueue_.dequeue();\n            const tile = /** @type {import(\"../../Tile.js\").default} */ (element[0]);\n            const tileSize = /** @type {import(\"../../size.js\").Size} */ (element[3]);\n            const tileGutter = /** @type {number} */ (element[4]);\n            this.bindTileTexture(\n              tile, tileSize, tileGutter, LINEAR, LINEAR);\n          }\n          return false;\n        }.bind(this);\n\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textureCacheFrameMarkerCount_ = 0;\n\n    this.initializeGL_();\n  }\n\n  /**\n   * @param {import(\"../../Tile.js\").default} tile Tile.\n   * @param {import(\"../../size.js\").Size} tileSize Tile size.\n   * @param {number} tileGutter Tile gutter.\n   * @param {number} magFilter Mag filter.\n   * @param {number} minFilter Min filter.\n   */\n  bindTileTexture(tile, tileSize, tileGutter, magFilter, minFilter) {\n    const gl = this.getGL();\n    const tileKey = tile.getKey();\n    if (this.textureCache_.containsKey(tileKey)) {\n      const textureCacheEntry = this.textureCache_.get(tileKey);\n      gl.bindTexture(TEXTURE_2D, textureCacheEntry.texture);\n      if (textureCacheEntry.magFilter != magFilter) {\n        gl.texParameteri(\n          TEXTURE_2D, TEXTURE_MAG_FILTER, magFilter);\n        textureCacheEntry.magFilter = magFilter;\n      }\n      if (textureCacheEntry.minFilter != minFilter) {\n        gl.texParameteri(\n          TEXTURE_2D, TEXTURE_MIN_FILTER, minFilter);\n        textureCacheEntry.minFilter = minFilter;\n      }\n    } else {\n      const texture = gl.createTexture();\n      const imageTile = /** @type {import(\"../../ImageTile.js\").default} */ (tile);\n      gl.bindTexture(TEXTURE_2D, texture);\n      if (tileGutter > 0) {\n        const clipTileCanvas = this.clipTileContext_.canvas;\n        const clipTileContext = this.clipTileContext_;\n        if (this.clipTileCanvasWidth_ !== tileSize[0] ||\n            this.clipTileCanvasHeight_ !== tileSize[1]) {\n          clipTileCanvas.width = tileSize[0];\n          clipTileCanvas.height = tileSize[1];\n          this.clipTileCanvasWidth_ = tileSize[0];\n          this.clipTileCanvasHeight_ = tileSize[1];\n        } else {\n          clipTileContext.clearRect(0, 0, tileSize[0], tileSize[1]);\n        }\n        clipTileContext.drawImage(imageTile.getImage(), tileGutter, tileGutter,\n          tileSize[0], tileSize[1], 0, 0, tileSize[0], tileSize[1]);\n        gl.texImage2D(TEXTURE_2D, 0,\n          RGBA, RGBA,\n          UNSIGNED_BYTE, clipTileCanvas);\n      } else {\n        gl.texImage2D(TEXTURE_2D, 0,\n          RGBA, RGBA,\n          UNSIGNED_BYTE, imageTile.getImage());\n      }\n      gl.texParameteri(\n        TEXTURE_2D, TEXTURE_MAG_FILTER, magFilter);\n      gl.texParameteri(\n        TEXTURE_2D, TEXTURE_MIN_FILTER, minFilter);\n      gl.texParameteri(TEXTURE_2D, TEXTURE_WRAP_S,\n        CLAMP_TO_EDGE);\n      gl.texParameteri(TEXTURE_2D, TEXTURE_WRAP_T,\n        CLAMP_TO_EDGE);\n      this.textureCache_.set(tileKey, {\n        texture: texture,\n        magFilter: magFilter,\n        minFilter: minFilter\n      });\n    }\n  }\n\n  /**\n   * @param {import(\"../../render/EventType.js\").default} type Event type.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n  dispatchRenderEvent(type, frameState) {\n    const map = this.getMap();\n    if (map.hasListener(type)) {\n      const context = this.context_;\n\n      const extent = frameState.extent;\n      const size = frameState.size;\n      const viewState = frameState.viewState;\n      const pixelRatio = frameState.pixelRatio;\n\n      const resolution = viewState.resolution;\n      const center = viewState.center;\n      const rotation = viewState.rotation;\n\n      const vectorContext = new WebGLImmediateRenderer(context,\n        center, resolution, rotation, size, extent, pixelRatio);\n      const composeEvent = new RenderEvent(type, vectorContext,\n        frameState, null, context);\n      map.dispatchEvent(composeEvent);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    const gl = this.getGL();\n    if (!gl.isContextLost()) {\n      this.textureCache_.forEach(\n        /**\n         * @param {?TextureCacheEntry} textureCacheEntry\n         *     Texture cache entry.\n         */\n        function(textureCacheEntry) {\n          if (textureCacheEntry) {\n            gl.deleteTexture(textureCacheEntry.texture);\n          }\n        });\n    }\n    this.context_.dispose();\n    super.disposeInternal();\n  }\n\n  /**\n   * @param {import(\"../../PluggableMap.js\").default} map Map.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @private\n   */\n  expireCache_(map, frameState) {\n    const gl = this.getGL();\n    let textureCacheEntry;\n    while (this.textureCache_.getCount() - this.textureCacheFrameMarkerCount_ >\n        WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK) {\n      textureCacheEntry = this.textureCache_.peekLast();\n      if (!textureCacheEntry) {\n        if (+this.textureCache_.peekLastKey() == frameState.index) {\n          break;\n        } else {\n          --this.textureCacheFrameMarkerCount_;\n        }\n      } else {\n        gl.deleteTexture(textureCacheEntry.texture);\n      }\n      this.textureCache_.pop();\n    }\n  }\n\n  /**\n   * @return {import(\"../../webgl/Context.js\").default} The context.\n   */\n  getContext() {\n    return this.context_;\n  }\n\n  /**\n   * @return {WebGLRenderingContext} GL.\n   */\n  getGL() {\n    return this.gl_;\n  }\n\n  /**\n   * @return {import(\"../../structs/PriorityQueue.js\").default<Array>} Tile texture queue.\n   */\n  getTileTextureQueue() {\n    return this.tileTextureQueue_;\n  }\n\n  /**\n   * @param {import(\"../../events/Event.js\").default} event Event.\n   * @protected\n   */\n  handleWebGLContextLost(event) {\n    event.preventDefault();\n    this.textureCache_.clear();\n    this.textureCacheFrameMarkerCount_ = 0;\n\n    const renderers = this.getLayerRenderers();\n    for (const id in renderers) {\n      const renderer = /** @type {import(\"./Layer.js\").default} */ (renderers[id]);\n      renderer.handleWebGLContextLost();\n    }\n  }\n\n  /**\n   * @protected\n   */\n  handleWebGLContextRestored() {\n    this.initializeGL_();\n    this.getMap().render();\n  }\n\n  /**\n   * @private\n   */\n  initializeGL_() {\n    const gl = this.gl_;\n    gl.activeTexture(TEXTURE0);\n    gl.blendFuncSeparate(\n      SRC_ALPHA, ONE_MINUS_SRC_ALPHA,\n      ONE, ONE_MINUS_SRC_ALPHA);\n    gl.disable(CULL_FACE);\n    gl.disable(DEPTH_TEST);\n    gl.disable(SCISSOR_TEST);\n    gl.disable(STENCIL_TEST);\n  }\n\n  /**\n   * @param {import(\"../../Tile.js\").default} tile Tile.\n   * @return {boolean} Is tile texture loaded.\n   */\n  isTileTextureLoaded(tile) {\n    return this.textureCache_.containsKey(tile.getKey());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  renderFrame(frameState) {\n\n    const context = this.getContext();\n    const gl = this.getGL();\n\n    if (gl.isContextLost()) {\n      return false;\n    }\n\n    if (!frameState) {\n      if (this.renderedVisible_) {\n        this.canvas_.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return false;\n    }\n\n    this.focus_ = frameState.focus;\n\n    this.textureCache_.set((-frameState.index).toString(), null);\n    ++this.textureCacheFrameMarkerCount_;\n\n    this.dispatchRenderEvent(RenderEventType.PRECOMPOSE, frameState);\n\n    /** @type {Array<import(\"../../layer/Layer.js\").State>} */\n    const layerStatesToDraw = [];\n    const layerStatesArray = frameState.layerStatesArray;\n    stableSort(layerStatesArray, sortByZIndex);\n\n    const viewResolution = frameState.viewState.resolution;\n    let i, ii;\n    for (i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      const layerState = layerStatesArray[i];\n      if (visibleAtResolution(layerState, viewResolution) &&\n          layerState.sourceState == SourceState.READY) {\n        const layerRenderer = /** @type {import(\"./Layer.js\").default} */ (this.getLayerRenderer(layerState.layer));\n        if (layerRenderer.prepareFrame(frameState, layerState, context)) {\n          layerStatesToDraw.push(layerState);\n        }\n      }\n    }\n\n    const width = frameState.size[0] * frameState.pixelRatio;\n    const height = frameState.size[1] * frameState.pixelRatio;\n    if (this.canvas_.width != width || this.canvas_.height != height) {\n      this.canvas_.width = width;\n      this.canvas_.height = height;\n    }\n\n    gl.bindFramebuffer(FRAMEBUFFER, null);\n\n    gl.clearColor(0, 0, 0, 0);\n    gl.clear(COLOR_BUFFER_BIT);\n    gl.enable(BLEND);\n    gl.viewport(0, 0, this.canvas_.width, this.canvas_.height);\n\n    for (i = 0, ii = layerStatesToDraw.length; i < ii; ++i) {\n      const layerState = layerStatesToDraw[i];\n      const layerRenderer = /** @type {import(\"./Layer.js\").default} */ (this.getLayerRenderer(layerState.layer));\n      layerRenderer.composeFrame(frameState, layerState, context);\n    }\n\n    if (!this.renderedVisible_) {\n      this.canvas_.style.display = '';\n      this.renderedVisible_ = true;\n    }\n\n    this.calculateMatrices2D(frameState);\n\n    if (this.textureCache_.getCount() - this.textureCacheFrameMarkerCount_ >\n        WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK) {\n      frameState.postRenderFunctions.push(\n        /** @type {import(\"../../PluggableMap.js\").PostRenderFunction} */ (this.expireCache_.bind(this))\n      );\n    }\n\n    if (!this.tileTextureQueue_.isEmpty()) {\n      frameState.postRenderFunctions.push(this.loadNextTileTexture_);\n      frameState.animate = true;\n    }\n\n    this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE, frameState);\n\n    this.scheduleRemoveUnusedLayerRenderers(frameState);\n    this.scheduleExpireIconCache(frameState);\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachFeatureAtCoordinate(\n    coordinate,\n    frameState,\n    hitTolerance,\n    callback,\n    thisArg,\n    layerFilter,\n    thisArg2\n  ) {\n    let result;\n\n    if (this.getGL().isContextLost()) {\n      return false;\n    }\n\n    const viewState = frameState.viewState;\n\n    const layerStates = frameState.layerStatesArray;\n    const numLayers = layerStates.length;\n    let i;\n    for (i = numLayers - 1; i >= 0; --i) {\n      const layerState = layerStates[i];\n      const layer = layerState.layer;\n      if (visibleAtResolution(layerState, viewState.resolution) &&\n          layerFilter.call(thisArg2, layer)) {\n        const layerRenderer = this.getLayerRenderer(layer);\n        result = layerRenderer.forEachFeatureAtCoordinate(\n          coordinate, frameState, hitTolerance, callback);\n        if (result) {\n          return result;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  hasFeatureAtCoordinate(coordinate, frameState, hitTolerance, layerFilter, thisArg) {\n    let hasFeature = false;\n\n    if (this.getGL().isContextLost()) {\n      return false;\n    }\n\n    const viewState = frameState.viewState;\n\n    const layerStates = frameState.layerStatesArray;\n    const numLayers = layerStates.length;\n    let i;\n    for (i = numLayers - 1; i >= 0; --i) {\n      const layerState = layerStates[i];\n      const layer = layerState.layer;\n      if (visibleAtResolution(layerState, viewState.resolution) &&\n          layerFilter.call(thisArg, layer)) {\n        const layerRenderer = this.getLayerRenderer(layer);\n        hasFeature =\n            layerRenderer.hasFeatureAtCoordinate(coordinate, frameState);\n        if (hasFeature) {\n          return true;\n        }\n      }\n    }\n    return hasFeature;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachLayerAtPixel(pixel, frameState, hitTolerance, callback, thisArg, layerFilter, thisArg2) {\n    if (this.getGL().isContextLost()) {\n      return false;\n    }\n\n    const viewState = frameState.viewState;\n    let result;\n\n    const layerStates = frameState.layerStatesArray;\n    const numLayers = layerStates.length;\n    let i;\n    for (i = numLayers - 1; i >= 0; --i) {\n      const layerState = layerStates[i];\n      const layer = layerState.layer;\n      if (visibleAtResolution(layerState, viewState.resolution) &&\n          layerFilter.call(thisArg, layer)) {\n        const layerRenderer = /** @type {import(\"./Layer.js\").default} */ (this.getLayerRenderer(layer));\n        result = layerRenderer.forEachLayerAtPixel(\n          pixel, frameState, callback, thisArg);\n        if (result) {\n          return result;\n        }\n      }\n    }\n    return undefined;\n  }\n}\n\n\nexport default WebGLMapRenderer;\n"],"names":["const","super","let","layerState","layerRenderer"],"mappings":"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"}