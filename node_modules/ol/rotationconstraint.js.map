{"version":3,"file":"rotationconstraint.js","sources":["../../src/ol/rotationconstraint.js"],"sourcesContent":["/**\n * @module ol/rotationconstraint\n */\nimport {toRadians} from './math.js';\n\n\n/**\n * @typedef {function((number|undefined), number): (number|undefined)} Type\n */\n\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @param {number} delta Delta.\n * @return {number|undefined} Rotation.\n */\nexport function disable(rotation, delta) {\n  if (rotation !== undefined) {\n    return 0;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @param {number} delta Delta.\n * @return {number|undefined} Rotation.\n */\nexport function none(rotation, delta) {\n  if (rotation !== undefined) {\n    return rotation + delta;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {number} n N.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToN(n) {\n  const theta = 2 * Math.PI / n;\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {number} delta Delta.\n     * @return {number|undefined} Rotation.\n     */\n    function(rotation, delta) {\n      if (rotation !== undefined) {\n        rotation = Math.floor((rotation + delta) / theta + 0.5) * theta;\n        return rotation;\n      } else {\n        return undefined;\n      }\n    });\n}\n\n\n/**\n * @param {number=} opt_tolerance Tolerance.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToZero(opt_tolerance) {\n  const tolerance = opt_tolerance || toRadians(5);\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {number} delta Delta.\n     * @return {number|undefined} Rotation.\n     */\n    function(rotation, delta) {\n      if (rotation !== undefined) {\n        if (Math.abs(rotation + delta) <= tolerance) {\n          return 0;\n        } else {\n          return rotation + delta;\n        }\n      } else {\n        return undefined;\n      }\n    });\n}\n"],"names":["const"],"mappings":"AAAA;;;AAGA,QAAQ,SAAS,OAAO,WAAW,CAAC;;;;;;;;;;;;;AAapC,OAAO,SAAS,OAAO,CAAC,QAAQ,EAAE,KAAK,EAAE;EACvC,IAAI,QAAQ,KAAK,SAAS,EAAE;IAC1B,OAAO,CAAC,CAAC;GACV,MAAM;IACL,OAAO,SAAS,CAAC;GAClB;CACF;;;;;;;;AAQD,OAAO,SAAS,IAAI,CAAC,QAAQ,EAAE,KAAK,EAAE;EACpC,IAAI,QAAQ,KAAK,SAAS,EAAE;IAC1B,OAAO,QAAQ,GAAG,KAAK,CAAC;GACzB,MAAM;IACL,OAAO,SAAS,CAAC;GAClB;CACF;;;;;;;AAOD,OAAO,SAAS,aAAa,CAAC,CAAC,EAAE;EAC/BA,GAAK,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;EAC9B,OAAO;;;;;;IAML,SAAS,QAAQ,EAAE,KAAK,EAAE;MACxB,IAAI,QAAQ,KAAK,SAAS,EAAE;QAC1B,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC,GAAG,KAAK,GAAG,GAAG,CAAC,GAAG,KAAK,CAAC;QAChE,OAAO,QAAQ,CAAC;OACjB,MAAM;QACL,OAAO,SAAS,CAAC;OAClB;KACF,CAAC,CAAC;CACN;;;;;;;AAOD,OAAO,SAAS,gBAAgB,CAAC,aAAa,EAAE;EAC9CA,GAAK,CAAC,SAAS,GAAG,aAAa,IAAI,SAAS,CAAC,CAAC,CAAC,CAAC;EAChD,OAAO;;;;;;IAML,SAAS,QAAQ,EAAE,KAAK,EAAE;MACxB,IAAI,QAAQ,KAAK,SAAS,EAAE;QAC1B,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,GAAG,KAAK,CAAC,IAAI,SAAS,EAAE;UAC3C,OAAO,CAAC,CAAC;SACV,MAAM;UACL,OAAO,QAAQ,GAAG,KAAK,CAAC;SACzB;OACF,MAAM;QACL,OAAO,SAAS,CAAC;OAClB;KACF,CAAC,CAAC;CACN;"}