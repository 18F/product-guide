{"version":3,"file":"TextReplay.js","sources":["../../../../src/ol/render/canvas/TextReplay.js"],"sourcesContent":["/**\n * @module ol/render/canvas/TextReplay\n */\nimport {getUid} from '../../util.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {intersects} from '../../extent.js';\nimport {matchingChunk} from '../../geom/flat/straightchunk.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {CANVAS_LINE_DASH} from '../../has.js';\nimport {labelCache, measureTextWidth, defaultTextAlign, measureTextHeight, defaultPadding, defaultLineCap, defaultLineDashOffset, defaultLineDash, defaultLineJoin, defaultFillStyle, checkFont, defaultFont, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline} from '../canvas.js';\nimport CanvasInstruction from './Instruction.js';\nimport CanvasReplay from './Replay.js';\nimport {TEXT_ALIGN} from '../replay.js';\nimport TextPlacement from '../../style/TextPlacement.js';\n\nclass CanvasTextReplay extends CanvasReplay {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    super(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n\n    /**\n     * @private\n     * @type {import(\"../canvas.js\").DeclutterGroup}\n     */\n    this.declutterGroup_;\n\n    /**\n     * @private\n     * @type {Array<HTMLCanvasElement>}\n     */\n    this.labels_ = null;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.text_ = '';\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.textRotateWithView_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textRotation_ = 0;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.textFillState_ = null;\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").FillState>}\n     */\n    this.fillStates = {};\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.textStrokeState_ = null;\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n     */\n    this.strokeStates = {};\n\n    /**\n     * @private\n     * @type {import(\"../canvas.js\").TextState}\n     */\n    this.textState_ = /** @type {import(\"../canvas.js\").TextState} */ ({});\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").TextState>}\n     */\n    this.textStates = {};\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.textKey_ = '';\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.fillKey_ = '';\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.strokeKey_ = '';\n\n    /**\n     * @private\n     * @type {Object<string, Object<string, number>>}\n     */\n    this.widths_ = {};\n\n    labelCache.prune();\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawText(geometry, feature) {\n    const fillState = this.textFillState_;\n    const strokeState = this.textStrokeState_;\n    const textState = this.textState_;\n    if (this.text_ === '' || !textState || (!fillState && !strokeState)) {\n      return;\n    }\n\n    let begin = this.coordinates.length;\n\n    const geometryType = geometry.getType();\n    let flatCoordinates = null;\n    let end = 2;\n    let stride = 2;\n    let i, ii;\n\n    if (textState.placement === TextPlacement.LINE) {\n      if (!intersects(this.getBufferedMaxExtent(), geometry.getExtent())) {\n        return;\n      }\n      let ends;\n      flatCoordinates = geometry.getFlatCoordinates();\n      stride = geometry.getStride();\n      if (geometryType == GeometryType.LINE_STRING) {\n        ends = [flatCoordinates.length];\n      } else if (geometryType == GeometryType.MULTI_LINE_STRING) {\n        ends = geometry.getEnds();\n      } else if (geometryType == GeometryType.POLYGON) {\n        ends = geometry.getEnds().slice(0, 1);\n      } else if (geometryType == GeometryType.MULTI_POLYGON) {\n        const endss = geometry.getEndss();\n        ends = [];\n        for (i = 0, ii = endss.length; i < ii; ++i) {\n          ends.push(endss[i][0]);\n        }\n      }\n      this.beginGeometry(geometry, feature);\n      const textAlign = textState.textAlign;\n      let flatOffset = 0;\n      let flatEnd;\n      for (let o = 0, oo = ends.length; o < oo; ++o) {\n        if (textAlign == undefined) {\n          const range = matchingChunk(textState.maxAngle, flatCoordinates, flatOffset, ends[o], stride);\n          flatOffset = range[0];\n          flatEnd = range[1];\n        } else {\n          flatEnd = ends[o];\n        }\n        for (i = flatOffset; i < flatEnd; i += stride) {\n          this.coordinates.push(flatCoordinates[i], flatCoordinates[i + 1]);\n        }\n        end = this.coordinates.length;\n        flatOffset = ends[o];\n        this.drawChars_(begin, end, this.declutterGroup_);\n        begin = end;\n      }\n      this.endGeometry(geometry, feature);\n\n    } else {\n      const label = this.getImage(this.text_, this.textKey_, this.fillKey_, this.strokeKey_);\n      const width = label.width / this.pixelRatio;\n      switch (geometryType) {\n        case GeometryType.POINT:\n        case GeometryType.MULTI_POINT:\n          flatCoordinates = geometry.getFlatCoordinates();\n          end = flatCoordinates.length;\n          break;\n        case GeometryType.LINE_STRING:\n          flatCoordinates = /** @type {import(\"../../geom/LineString.js\").default} */ (geometry).getFlatMidpoint();\n          break;\n        case GeometryType.CIRCLE:\n          flatCoordinates = /** @type {import(\"../../geom/Circle.js\").default} */ (geometry).getCenter();\n          break;\n        case GeometryType.MULTI_LINE_STRING:\n          flatCoordinates = /** @type {import(\"../../geom/MultiLineString.js\").default} */ (geometry).getFlatMidpoints();\n          end = flatCoordinates.length;\n          break;\n        case GeometryType.POLYGON:\n          flatCoordinates = /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry).getFlatInteriorPoint();\n          if (!textState.overflow && flatCoordinates[2] / this.resolution < width) {\n            return;\n          }\n          stride = 3;\n          break;\n        case GeometryType.MULTI_POLYGON:\n          const interiorPoints = /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry).getFlatInteriorPoints();\n          flatCoordinates = [];\n          for (i = 0, ii = interiorPoints.length; i < ii; i += 3) {\n            if (textState.overflow || interiorPoints[i + 2] / this.resolution >= width) {\n              flatCoordinates.push(interiorPoints[i], interiorPoints[i + 1]);\n            }\n          }\n          end = flatCoordinates.length;\n          if (end == 0) {\n            return;\n          }\n          break;\n        default:\n      }\n      end = this.appendFlatCoordinates(flatCoordinates, 0, end, stride, false, false);\n      if (textState.backgroundFill || textState.backgroundStroke) {\n        this.setFillStrokeStyle(textState.backgroundFill, textState.backgroundStroke);\n        if (textState.backgroundFill) {\n          this.updateFillStyle(this.state, this.createFill, geometry);\n          this.hitDetectionInstructions.push(this.createFill(this.state, geometry));\n        }\n        if (textState.backgroundStroke) {\n          this.updateStrokeStyle(this.state, this.applyStroke);\n          this.hitDetectionInstructions.push(this.createStroke(this.state));\n        }\n      }\n      this.beginGeometry(geometry, feature);\n      this.drawTextImage_(label, begin, end);\n      this.endGeometry(geometry, feature);\n    }\n  }\n\n  /**\n   * @param {string} text Text.\n   * @param {string} textKey Text style key.\n   * @param {string} fillKey Fill style key.\n   * @param {string} strokeKey Stroke style key.\n   * @return {HTMLCanvasElement} Image.\n   */\n  getImage(text, textKey, fillKey, strokeKey) {\n    let label;\n    const key = strokeKey + textKey + text + fillKey + this.pixelRatio;\n\n    if (!labelCache.containsKey(key)) {\n      const strokeState = strokeKey ? this.strokeStates[strokeKey] || this.textStrokeState_ : null;\n      const fillState = fillKey ? this.fillStates[fillKey] || this.textFillState_ : null;\n      const textState = this.textStates[textKey] || this.textState_;\n      const pixelRatio = this.pixelRatio;\n      const scale = textState.scale * pixelRatio;\n      const align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n      const strokeWidth = strokeKey && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n      const lines = text.split('\\n');\n      const numLines = lines.length;\n      const widths = [];\n      const width = measureTextWidths(textState.font, lines, widths);\n      const lineHeight = measureTextHeight(textState.font);\n      const height = lineHeight * numLines;\n      const renderWidth = (width + strokeWidth);\n      const context = createCanvasContext2D(\n        Math.ceil(renderWidth * scale),\n        Math.ceil((height + strokeWidth) * scale));\n      label = context.canvas;\n      labelCache.set(key, label);\n      if (scale != 1) {\n        context.scale(scale, scale);\n      }\n      context.font = textState.font;\n      if (strokeKey) {\n        context.strokeStyle = strokeState.strokeStyle;\n        context.lineWidth = strokeWidth;\n        context.lineCap = /** @type {CanvasLineCap} */ (strokeState.lineCap);\n        context.lineJoin = /** @type {CanvasLineJoin} */ (strokeState.lineJoin);\n        context.miterLimit = strokeState.miterLimit;\n        if (CANVAS_LINE_DASH && strokeState.lineDash.length) {\n          context.setLineDash(strokeState.lineDash);\n          context.lineDashOffset = strokeState.lineDashOffset;\n        }\n      }\n      if (fillKey) {\n        context.fillStyle = fillState.fillStyle;\n      }\n      context.textBaseline = 'middle';\n      context.textAlign = 'center';\n      const leftRight = (0.5 - align);\n      const x = align * label.width / scale + leftRight * strokeWidth;\n      let i;\n      if (strokeKey) {\n        for (i = 0; i < numLines; ++i) {\n          context.strokeText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n        }\n      }\n      if (fillKey) {\n        for (i = 0; i < numLines; ++i) {\n          context.fillText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n        }\n      }\n    }\n    return labelCache.get(key);\n  }\n\n  /**\n   * @private\n   * @param {HTMLCanvasElement} label Label.\n   * @param {number} begin Begin.\n   * @param {number} end End.\n   */\n  drawTextImage_(label, begin, end) {\n    const textState = this.textState_;\n    const strokeState = this.textStrokeState_;\n    const pixelRatio = this.pixelRatio;\n    const align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n    const baseline = TEXT_ALIGN[textState.textBaseline];\n    const strokeWidth = strokeState && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n    const anchorX = align * label.width / pixelRatio + 2 * (0.5 - align) * strokeWidth;\n    const anchorY = baseline * label.height / pixelRatio + 2 * (0.5 - baseline) * strokeWidth;\n    this.instructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n      label, (anchorX - this.textOffsetX_) * pixelRatio, (anchorY - this.textOffsetY_) * pixelRatio,\n      this.declutterGroup_, label.height, 1, 0, 0, this.textRotateWithView_, this.textRotation_,\n      1, label.width,\n      textState.padding == defaultPadding ?\n        defaultPadding : textState.padding.map(function(p) {\n          return p * pixelRatio;\n        }),\n      !!textState.backgroundFill, !!textState.backgroundStroke\n    ]);\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n      label, (anchorX - this.textOffsetX_) * pixelRatio, (anchorY - this.textOffsetY_) * pixelRatio,\n      this.declutterGroup_, label.height, 1, 0, 0, this.textRotateWithView_, this.textRotation_,\n      1 / pixelRatio, label.width, textState.padding,\n      !!textState.backgroundFill, !!textState.backgroundStroke\n    ]);\n  }\n\n  /**\n   * @private\n   * @param {number} begin Begin.\n   * @param {number} end End.\n   * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n   */\n  drawChars_(begin, end, declutterGroup) {\n    const strokeState = this.textStrokeState_;\n    const textState = this.textState_;\n    const fillState = this.textFillState_;\n\n    const strokeKey = this.strokeKey_;\n    if (strokeState) {\n      if (!(strokeKey in this.strokeStates)) {\n        this.strokeStates[strokeKey] = /** @type {import(\"../canvas.js\").StrokeState} */ ({\n          strokeStyle: strokeState.strokeStyle,\n          lineCap: strokeState.lineCap,\n          lineDashOffset: strokeState.lineDashOffset,\n          lineWidth: strokeState.lineWidth,\n          lineJoin: strokeState.lineJoin,\n          miterLimit: strokeState.miterLimit,\n          lineDash: strokeState.lineDash\n        });\n      }\n    }\n    const textKey = this.textKey_;\n    if (!(this.textKey_ in this.textStates)) {\n      this.textStates[this.textKey_] = /** @type {import(\"../canvas.js\").TextState} */ ({\n        font: textState.font,\n        textAlign: textState.textAlign || defaultTextAlign,\n        scale: textState.scale\n      });\n    }\n    const fillKey = this.fillKey_;\n    if (fillState) {\n      if (!(fillKey in this.fillStates)) {\n        this.fillStates[fillKey] = /** @type {import(\"../canvas.js\").FillState} */ ({\n          fillStyle: fillState.fillStyle\n        });\n      }\n    }\n\n    const pixelRatio = this.pixelRatio;\n    const baseline = TEXT_ALIGN[textState.textBaseline];\n\n    const offsetY = this.textOffsetY_ * pixelRatio;\n    const text = this.text_;\n    const font = textState.font;\n    const textScale = textState.scale;\n    const strokeWidth = strokeState ? strokeState.lineWidth * textScale / 2 : 0;\n    let widths = this.widths_[font];\n    if (!widths) {\n      this.widths_[font] = widths = {};\n    }\n    this.instructions.push([CanvasInstruction.DRAW_CHARS,\n      begin, end, baseline, declutterGroup,\n      textState.overflow, fillKey, textState.maxAngle,\n      function(text) {\n        let width = widths[text];\n        if (!width) {\n          width = widths[text] = measureTextWidth(font, text);\n        }\n        return width * textScale * pixelRatio;\n      },\n      offsetY, strokeKey, strokeWidth * pixelRatio, text, textKey, 1\n    ]);\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_CHARS,\n      begin, end, baseline, declutterGroup,\n      textState.overflow, fillKey, textState.maxAngle,\n      function(text) {\n        let width = widths[text];\n        if (!width) {\n          width = widths[text] = measureTextWidth(font, text);\n        }\n        return width * textScale;\n      },\n      offsetY, strokeKey, strokeWidth, text, textKey, 1 / pixelRatio\n    ]);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setTextStyle(textStyle, declutterGroup) {\n    let textState, fillState, strokeState;\n    if (!textStyle) {\n      this.text_ = '';\n    } else {\n      this.declutterGroup_ = /** @type {import(\"../canvas.js\").DeclutterGroup} */ (declutterGroup);\n\n      const textFillStyle = textStyle.getFill();\n      if (!textFillStyle) {\n        fillState = this.textFillState_ = null;\n      } else {\n        fillState = this.textFillState_;\n        if (!fillState) {\n          fillState = this.textFillState_ = /** @type {import(\"../canvas.js\").FillState} */ ({});\n        }\n        fillState.fillStyle = asColorLike(\n          textFillStyle.getColor() || defaultFillStyle);\n      }\n\n      const textStrokeStyle = textStyle.getStroke();\n      if (!textStrokeStyle) {\n        strokeState = this.textStrokeState_ = null;\n      } else {\n        strokeState = this.textStrokeState_;\n        if (!strokeState) {\n          strokeState = this.textStrokeState_ = /** @type {import(\"../canvas.js\").StrokeState} */ ({});\n        }\n        const lineDash = textStrokeStyle.getLineDash();\n        const lineDashOffset = textStrokeStyle.getLineDashOffset();\n        const lineWidth = textStrokeStyle.getWidth();\n        const miterLimit = textStrokeStyle.getMiterLimit();\n        strokeState.lineCap = textStrokeStyle.getLineCap() || defaultLineCap;\n        strokeState.lineDash = lineDash ? lineDash.slice() : defaultLineDash;\n        strokeState.lineDashOffset =\n            lineDashOffset === undefined ? defaultLineDashOffset : lineDashOffset;\n        strokeState.lineJoin = textStrokeStyle.getLineJoin() || defaultLineJoin;\n        strokeState.lineWidth =\n            lineWidth === undefined ? defaultLineWidth : lineWidth;\n        strokeState.miterLimit =\n            miterLimit === undefined ? defaultMiterLimit : miterLimit;\n        strokeState.strokeStyle = asColorLike(\n          textStrokeStyle.getColor() || defaultStrokeStyle);\n      }\n\n      textState = this.textState_;\n      const font = textStyle.getFont() || defaultFont;\n      checkFont(font);\n      const textScale = textStyle.getScale();\n      textState.overflow = textStyle.getOverflow();\n      textState.font = font;\n      textState.maxAngle = textStyle.getMaxAngle();\n      textState.placement = textStyle.getPlacement();\n      textState.textAlign = textStyle.getTextAlign();\n      textState.textBaseline = textStyle.getTextBaseline() || defaultTextBaseline;\n      textState.backgroundFill = textStyle.getBackgroundFill();\n      textState.backgroundStroke = textStyle.getBackgroundStroke();\n      textState.padding = textStyle.getPadding() || defaultPadding;\n      textState.scale = textScale === undefined ? 1 : textScale;\n\n      const textOffsetX = textStyle.getOffsetX();\n      const textOffsetY = textStyle.getOffsetY();\n      const textRotateWithView = textStyle.getRotateWithView();\n      const textRotation = textStyle.getRotation();\n      this.text_ = textStyle.getText() || '';\n      this.textOffsetX_ = textOffsetX === undefined ? 0 : textOffsetX;\n      this.textOffsetY_ = textOffsetY === undefined ? 0 : textOffsetY;\n      this.textRotateWithView_ = textRotateWithView === undefined ? false : textRotateWithView;\n      this.textRotation_ = textRotation === undefined ? 0 : textRotation;\n\n      this.strokeKey_ = strokeState ?\n        (typeof strokeState.strokeStyle == 'string' ? strokeState.strokeStyle : getUid(strokeState.strokeStyle)) +\n        strokeState.lineCap + strokeState.lineDashOffset + '|' + strokeState.lineWidth +\n        strokeState.lineJoin + strokeState.miterLimit + '[' + strokeState.lineDash.join() + ']' :\n        '';\n      this.textKey_ = textState.font + textState.scale + (textState.textAlign || '?');\n      this.fillKey_ = fillState ?\n        (typeof fillState.fillStyle == 'string' ? fillState.fillStyle : ('|' + getUid(fillState.fillStyle))) :\n        '';\n    }\n  }\n}\n\n\n/**\n * @param {string} font Font to use for measuring.\n * @param {Array<string>} lines Lines to measure.\n * @param {Array<number>} widths Array will be populated with the widths of\n * each line.\n * @return {number} Width of the whole text.\n */\nexport function measureTextWidths(font, lines, widths) {\n  const numLines = lines.length;\n  let width = 0;\n  for (let i = 0; i < numLines; ++i) {\n    const currentWidth = measureTextWidth(font, lines[i]);\n    width = Math.max(width, currentWidth);\n    widths.push(currentWidth);\n  }\n  return width;\n}\n\n\nexport default CanvasTextReplay;\n"],"names":["super","const","let"],"mappings":"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"}