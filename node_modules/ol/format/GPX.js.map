{"version":3,"file":"GPX.js","sources":["../../../src/ol/format/GPX.js"],"sourcesContent":["/**\n * @module ol/format/GPX\n */\nimport Feature from '../Feature.js';\nimport {includes} from '../array.js';\nimport {transformWithOptions} from './Feature.js';\nimport XMLFeature from './XMLFeature.js';\nimport {readString, readDecimal, readNonNegativeInteger, readDateTime, writeStringTextNode, writeNonNegativeIntegerTextNode, writeDecimalTextNode, writeDateTimeTextNode} from './xsd.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport Point from '../geom/Point.js';\nimport {get as getProjection} from '../proj.js';\nimport {createElementNS, makeArrayPusher, makeArraySerializer, makeChildAppender,\n  makeObjectPropertySetter, makeSequence, makeSimpleNodeFactory, makeStructureNS,\n  OBJECT_PROPERTY_NODE_FACTORY, parseNode, pushParseAndPop, pushSerializeAndPop,\n  XML_SCHEMA_INSTANCE_URI} from '../xml.js';\n\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nconst NAMESPACE_URIS = [\n  null,\n  'http://www.topografix.com/GPX/1/0',\n  'http://www.topografix.com/GPX/1/1'\n];\n\n\n/**\n * @const\n * @type {string}\n */\nconst SCHEMA_LOCATION = 'http://www.topografix.com/GPX/1/1 ' +\n    'http://www.topografix.com/GPX/1/1/gpx.xsd';\n\n\n/**\n * @const\n * @type {Object<string, function(Node, Array<*>): (Feature|undefined)>}\n */\nconst FEATURE_READER = {\n  'rte': readRte,\n  'trk': readTrk,\n  'wpt': readWpt\n};\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst GPX_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'rte': makeArrayPusher(readRte),\n    'trk': makeArrayPusher(readTrk),\n    'wpt': makeArrayPusher(readWpt)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst LINK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'text': makeObjectPropertySetter(readString, 'linkText'),\n    'type': makeObjectPropertySetter(readString, 'linkType')\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst GPX_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'rte': makeChildAppender(writeRte),\n    'trk': makeChildAppender(writeTrk),\n    'wpt': makeChildAppender(writeWpt)\n  });\n\n\n/**\n * @typedef {Object} Options\n * @property {function(Feature, Node)} [readExtensions] Callback function\n * to process `extensions` nodes. To prevent memory leaks, this callback function must\n * not store any references to the node. Note that the `extensions`\n * node is not allowed in GPX 1.0. Moreover, only `extensions`\n * nodes from `wpt`, `rte` and `trk` can be processed, as those are\n * directly mapped to a feature.\n */\n\n/**\n * @typedef {Object} LayoutOptions\n * @property {boolean} [hasZ]\n * @property {boolean} [hasM]\n */\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GPX format.\n *\n * Note that {@link module:ol/format/GPX~GPX#readFeature} only reads the first\n * feature of the source.\n *\n * When reading, routes (`<rte>`) are converted into LineString geometries, and\n * tracks (`<trk>`) into MultiLineString. Any properties on route and track\n * waypoints are ignored.\n *\n * When writing, LineString geometries are output as routes (`<rte>`), and\n * MultiLineString as tracks (`<trk>`).\n *\n * @api\n */\nclass GPX extends XMLFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection('EPSG:4326');\n\n    /**\n     * @type {function(Feature, Node)|undefined}\n     * @private\n     */\n    this.readExtensions_ = options.readExtensions;\n  }\n\n  /**\n   * @param {Array<Feature>} features List of features.\n   * @private\n   */\n  handleReadExtensions_(features) {\n    if (!features) {\n      features = [];\n    }\n    for (let i = 0, ii = features.length; i < ii; ++i) {\n      const feature = features[i];\n      if (this.readExtensions_) {\n        const extensionsNode = feature.get('extensionsNode_') || null;\n        this.readExtensions_(feature, extensionsNode);\n      }\n      feature.set('extensionsNode_', undefined);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return null;\n    }\n    const featureReader = FEATURE_READER[node.localName];\n    if (!featureReader) {\n      return null;\n    }\n    const feature = featureReader(node, [this.getReadOptions(node, opt_options)]);\n    if (!feature) {\n      return null;\n    }\n    this.handleReadExtensions_([feature]);\n    return feature;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return [];\n    }\n    if (node.localName == 'gpx') {\n      /** @type {Array<Feature>} */\n      const features = pushParseAndPop([], GPX_PARSERS,\n        node, [this.getReadOptions(node, opt_options)]);\n      if (features) {\n        this.handleReadExtensions_(features);\n        return features;\n      } else {\n        return [];\n      }\n    }\n    return [];\n  }\n\n  /**\n   * Encode an array of features in the GPX format as an XML node.\n   * LineString geometries are output as routes (`<rte>`), and MultiLineString\n   * as tracks (`<trk>`).\n   *\n   * @param {Array<Feature>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n   * @return {Node} Node.\n   * @override\n   * @api\n   */\n  writeFeaturesNode(features, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    //FIXME Serialize metadata\n    const gpx = createElementNS('http://www.topografix.com/GPX/1/1', 'gpx');\n    const xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n    gpx.setAttributeNS(xmlnsUri, 'xmlns:xsi', XML_SCHEMA_INSTANCE_URI);\n    gpx.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', SCHEMA_LOCATION);\n    gpx.setAttribute('version', '1.1');\n    gpx.setAttribute('creator', 'OpenLayers');\n\n    pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */\n      ({node: gpx}), GPX_SERIALIZERS, GPX_NODE_FACTORY, features, [opt_options]);\n    return gpx;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst RTE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'number': makeObjectPropertySetter(readNonNegativeInteger),\n    'extensions': parseExtensions,\n    'type': makeObjectPropertySetter(readString),\n    'rtept': parseRtePt\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst RTEPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst TRK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'number': makeObjectPropertySetter(readNonNegativeInteger),\n    'type': makeObjectPropertySetter(readString),\n    'extensions': parseExtensions,\n    'trkseg': parseTrkSeg\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst TRKSEG_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'trkpt': parseTrkPt\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst TRKPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst WPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime),\n    'magvar': makeObjectPropertySetter(readDecimal),\n    'geoidheight': makeObjectPropertySetter(readDecimal),\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'sym': makeObjectPropertySetter(readString),\n    'type': makeObjectPropertySetter(readString),\n    'fix': makeObjectPropertySetter(readString),\n    'sat': makeObjectPropertySetter(readNonNegativeInteger),\n    'hdop': makeObjectPropertySetter(readDecimal),\n    'vdop': makeObjectPropertySetter(readDecimal),\n    'pdop': makeObjectPropertySetter(readDecimal),\n    'ageofdgpsdata': makeObjectPropertySetter(readDecimal),\n    'dgpsid': makeObjectPropertySetter(readNonNegativeInteger),\n    'extensions': parseExtensions\n  });\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst LINK_SEQUENCE = ['text', 'type'];\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst LINK_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'text': makeChildAppender(writeStringTextNode),\n    'type': makeChildAppender(writeStringTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst RTE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'rtept'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst RTE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'rtept': makeArraySerializer(makeChildAppender(writeWptType))\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst RTEPT_TYPE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'ele', 'time'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst TRK_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'trkseg'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst TRK_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'trkseg': makeArraySerializer(makeChildAppender(writeTrkSeg))\n  });\n\n\n/**\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst TRKSEG_NODE_FACTORY = makeSimpleNodeFactory('trkpt');\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst TRKSEG_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'trkpt': makeChildAppender(writeWptType)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst WPT_TYPE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'ele', 'time', 'magvar', 'geoidheight', 'name', 'cmt', 'desc', 'src',\n    'link', 'sym', 'type', 'fix', 'sat', 'hdop', 'vdop', 'pdop',\n    'ageofdgpsdata', 'dgpsid'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst WPT_TYPE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeChildAppender(writeDecimalTextNode),\n    'time': makeChildAppender(writeDateTimeTextNode),\n    'magvar': makeChildAppender(writeDecimalTextNode),\n    'geoidheight': makeChildAppender(writeDecimalTextNode),\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'sym': makeChildAppender(writeStringTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'fix': makeChildAppender(writeStringTextNode),\n    'sat': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'hdop': makeChildAppender(writeDecimalTextNode),\n    'vdop': makeChildAppender(writeDecimalTextNode),\n    'pdop': makeChildAppender(writeDecimalTextNode),\n    'ageofdgpsdata': makeChildAppender(writeDecimalTextNode),\n    'dgpsid': makeChildAppender(writeNonNegativeIntegerTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object<string, string>}\n */\nconst GEOMETRY_TYPE_TO_NODENAME = {\n  'Point': 'wpt',\n  'LineString': 'rte',\n  'MultiLineString': 'trk'\n};\n\n\n/**\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nfunction GPX_NODE_FACTORY(value, objectStack, opt_nodeName) {\n  const geometry = /** @type {Feature} */ (value).getGeometry();\n  if (geometry) {\n    const nodeName = GEOMETRY_TYPE_TO_NODENAME[geometry.getType()];\n    if (nodeName) {\n      const parentNode = objectStack[objectStack.length - 1].node;\n      return createElementNS(parentNode.namespaceURI, nodeName);\n    }\n  }\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {LayoutOptions} layoutOptions Layout options.\n * @param {Element} node Node.\n * @param {!Object} values Values.\n * @return {Array<number>} Flat coordinates.\n */\nfunction appendCoordinate(flatCoordinates, layoutOptions, node, values) {\n  flatCoordinates.push(\n    parseFloat(node.getAttribute('lon')),\n    parseFloat(node.getAttribute('lat')));\n  if ('ele' in values) {\n    flatCoordinates.push(/** @type {number} */ (values['ele']));\n    delete values['ele'];\n    layoutOptions.hasZ = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  if ('time' in values) {\n    flatCoordinates.push(/** @type {number} */ (values['time']));\n    delete values['time'];\n    layoutOptions.hasM = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  return flatCoordinates;\n}\n\n\n/**\n * Choose GeometryLayout based on flags in layoutOptions and adjust flatCoordinates\n * and ends arrays by shrinking them accordingly (removing unused zero entries).\n *\n * @param {LayoutOptions} layoutOptions Layout options.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {Array<number>=} ends Ends.\n * @return {GeometryLayout} Layout.\n */\nfunction applyLayoutOptions(layoutOptions, flatCoordinates, ends) {\n  let layout = GeometryLayout.XY;\n  let stride = 2;\n  if (layoutOptions.hasZ && layoutOptions.hasM) {\n    layout = GeometryLayout.XYZM;\n    stride = 4;\n  } else if (layoutOptions.hasZ) {\n    layout = GeometryLayout.XYZ;\n    stride = 3;\n  } else if (layoutOptions.hasM) {\n    layout = GeometryLayout.XYM;\n    stride = 3;\n  }\n  if (stride !== 4) {\n    for (let i = 0, ii = flatCoordinates.length / 4; i < ii; i++) {\n      flatCoordinates[i * stride] = flatCoordinates[i * 4];\n      flatCoordinates[i * stride + 1] = flatCoordinates[i * 4 + 1];\n      if (layoutOptions.hasZ) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 2];\n      }\n      if (layoutOptions.hasM) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 3];\n      }\n    }\n    flatCoordinates.length = flatCoordinates.length / 4 * stride;\n    if (ends) {\n      for (let i = 0, ii = ends.length; i < ii; i++) {\n        ends[i] = ends[i] / 4 * stride;\n      }\n    }\n  }\n  return layout;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseLink(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const href = node.getAttribute('href');\n  if (href !== null) {\n    values['link'] = href;\n  }\n  parseNode(LINK_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseExtensions(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  values['extensionsNode_'] = node;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseRtePt(node, objectStack) {\n  const values = pushParseAndPop({}, RTEPT_PARSERS, node, objectStack);\n  if (values) {\n    const rteValues = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n    const flatCoordinates = /** @type {Array<number>} */ (rteValues['flatCoordinates']);\n    const layoutOptions = /** @type {LayoutOptions} */ (rteValues['layoutOptions']);\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseTrkPt(node, objectStack) {\n  const values = pushParseAndPop({}, TRKPT_PARSERS, node, objectStack);\n  if (values) {\n    const trkValues = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n    const flatCoordinates = /** @type {Array<number>} */ (trkValues['flatCoordinates']);\n    const layoutOptions = /** @type {LayoutOptions} */ (trkValues['layoutOptions']);\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseTrkSeg(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  parseNode(TRKSEG_PARSERS, node, objectStack);\n  const flatCoordinates = /** @type {Array<number>} */\n      (values['flatCoordinates']);\n  const ends = /** @type {Array<number>} */ (values['ends']);\n  ends.push(flatCoordinates.length);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Track.\n */\nfunction readRte(node, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({\n    'flatCoordinates': [],\n    'layoutOptions': {}\n  }, RTE_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const flatCoordinates = /** @type {Array<number>} */\n      (values['flatCoordinates']);\n  delete values['flatCoordinates'];\n  const layoutOptions = /** @type {LayoutOptions} */ (values['layoutOptions']);\n  delete values['layoutOptions'];\n  const layout = applyLayoutOptions(layoutOptions, flatCoordinates);\n  const geometry = new LineString(flatCoordinates, layout);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Track.\n */\nfunction readTrk(node, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({\n    'flatCoordinates': [],\n    'ends': [],\n    'layoutOptions': {}\n  }, TRK_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const flatCoordinates = /** @type {Array<number>} */\n      (values['flatCoordinates']);\n  delete values['flatCoordinates'];\n  const ends = /** @type {Array<number>} */ (values['ends']);\n  delete values['ends'];\n  const layoutOptions = /** @type {LayoutOptions} */ (values['layoutOptions']);\n  delete values['layoutOptions'];\n  const layout = applyLayoutOptions(layoutOptions, flatCoordinates, ends);\n  const geometry = new MultiLineString(flatCoordinates, layout, ends);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Waypoint.\n */\nfunction readWpt(node, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({}, WPT_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const layoutOptions = /** @type {LayoutOptions} */ ({});\n  const coordinates = appendCoordinate([], layoutOptions, node, values);\n  const layout = applyLayoutOptions(layoutOptions, coordinates);\n  const geometry = new Point(coordinates, layout);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {string} value Value for the link's `href` attribute.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeLink(node, value, objectStack) {\n  node.setAttribute('href', value);\n  const context = objectStack[objectStack.length - 1];\n  const properties = context['properties'];\n  const link = [\n    properties['linkText'],\n    properties['linkType']\n  ];\n  pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */ ({node: node}),\n    LINK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    link, objectStack, LINK_SEQUENCE);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeWptType(node, coordinate, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const parentNode = context.node;\n  const namespaceURI = parentNode.namespaceURI;\n  const properties = context['properties'];\n  //FIXME Projection handling\n  node.setAttributeNS(null, 'lat', String(coordinate[1]));\n  node.setAttributeNS(null, 'lon', String(coordinate[0]));\n  const geometryLayout = context['geometryLayout'];\n  switch (geometryLayout) {\n    case GeometryLayout.XYZM:\n      if (coordinate[3] !== 0) {\n        properties['time'] = coordinate[3];\n      }\n      // fall through\n    case GeometryLayout.XYZ:\n      if (coordinate[2] !== 0) {\n        properties['ele'] = coordinate[2];\n      }\n      break;\n    case GeometryLayout.XYM:\n      if (coordinate[2] !== 0) {\n        properties['time'] = coordinate[2];\n      }\n      break;\n    default:\n      // pass\n  }\n  const orderedKeys = (node.nodeName == 'rtept') ?\n    RTEPT_TYPE_SEQUENCE[namespaceURI] :\n    WPT_TYPE_SEQUENCE[namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */\n    ({node: node, 'properties': properties}),\n    WPT_TYPE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeRte(node, feature, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n  const properties = feature.getProperties();\n  const context = {node: node};\n  context['properties'] = properties;\n  const geometry = feature.getGeometry();\n  if (geometry.getType() == GeometryType.LINE_STRING) {\n    const lineString = /** @type {LineString} */ (transformWithOptions(geometry, true, options));\n    context['geometryLayout'] = lineString.getLayout();\n    properties['rtept'] = lineString.getCoordinates();\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = RTE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context,\n    RTE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeTrk(node, feature, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n  const properties = feature.getProperties();\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const context = {node: node};\n  context['properties'] = properties;\n  const geometry = feature.getGeometry();\n  if (geometry.getType() == GeometryType.MULTI_LINE_STRING) {\n    const multiLineString = /** @type {MultiLineString} */ (transformWithOptions(geometry, true, options));\n    properties['trkseg'] = multiLineString.getLineStrings();\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = TRK_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context,\n    TRK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {LineString} lineString LineString.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeTrkSeg(node, lineString, objectStack) {\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const context = {node: node};\n  context['geometryLayout'] = lineString.getLayout();\n  context['properties'] = {};\n  pushSerializeAndPop(context,\n    TRKSEG_SERIALIZERS, TRKSEG_NODE_FACTORY,\n    lineString.getCoordinates(), objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeWpt(node, feature, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n  const context = objectStack[objectStack.length - 1];\n  context['properties'] = feature.getProperties();\n  const geometry = feature.getGeometry();\n  if (geometry.getType() == GeometryType.POINT) {\n    const point = /** @type {Point} */ (transformWithOptions(geometry, true, options));\n    context['geometryLayout'] = point.getLayout();\n    writeWptType(node, point.getCoordinates(), objectStack);\n  }\n}\n\n\nexport default GPX;\n"],"names":["const","super","let","i","ii"],"mappings":"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"}